import{r as t,h as e}from"./p-da09bae5.js";import{E as s,N as i,Z as r}from"./p-58c3b402.js";import{u as a}from"./p-f9acc9cd.js";const h=class{constructor(e){t(this,e),this.inputChanged=this.inputChanged.bind(this)}parameterChangeHandler(){this.setUpInput()}componentDidLoad(){this.parameter&&this.setUpInput()}setUpInput(){this.range=this.parameter.getRange(),this.step=this.parameter.getStep(),this.setInputValue(),this.parameter.on("valueChanged",t=>{console.log("value changed"),this.setInputValue(),t.mode==s.REMOTEUSER_SETVALUE&&(this.inputField.classList.add("user-edited"),this.remoteUserEditedHighlightId&&clearTimeout(this.remoteUserEditedHighlightId),this.remoteUserEditedHighlightId=setTimeout(()=>{this.inputField.classList.remove("user-edited"),this.remoteUserEditedHighlightId=null},1500))})}setInputValue(){this.value=this.range?(this.parameter.getValue()-this.range[0])/(this.range[1]-this.range[0])*200:this.parameter.getValue()}inputChanged(){let t=this.round(this.inputField.valueAsNumber);if(this.range&&(t=this.range[0]+t/200*(this.range[1]-this.range[0]),t=this.clamp(t,this.range[0],this.range[1])),this.appData.undoRedoManager){const e=new i(this.parameter,t);this.appData.undoRedoManager.addChange(e)}else this.parameter.setValue(t)}round(t,e=6){return Number(Math.round(Number(t+"e"+e))+"e-"+e)}clamp(t,e,s){return Math.max(Math.min(t,Math.max(e,s)),Math.min(e,s))}render(){return e("div",{class:"zea-param-widget-number"},e("input",this.range?{onChange:this.inputChanged,ref:t=>this.inputField=t,class:"mdl-slider mdl-js-slider",type:"range",min:"0",max:"200",step:this.step?this.step:1,id:this.parameter.getName(),value:this.value,tabindex:"0"}:{onChange:this.inputChanged,ref:t=>this.inputField=t,type:"number",pattern:"-?[0-9]*(.[0-9]+)?",id:this.parameter.getName(),value:this.value,tabindex:"0"}))}static get watchers(){return{parameter:["parameterChangeHandler"]}}};a.registerWidget("zea-param-widget-number",t=>t.constructor.name==r.name),h.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-param-widget-number{color:var(--color-foreground-1);background-color:var(--color-background-2);max-width:400px}.user-edited{-webkit-box-shadow:0 0 8px var(--color-success-1);box-shadow:0 0 8px var(--color-success-1);margin:0px}.zea-param-widget-number input{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;color:var(--color-foreground-1);background-color:var(--color-background-3)}input[type='number']{padding:0.3em;font-size:0.9em;border:1px solid var(--color-grey-3);text-align:right}";export{h as Z}