import{c as t,g as n}from"./p-4055714e.js";import{p as i,r as e}from"./p-4c47fa7c.js";import{B as r}from"./p-f6490bfc.js";var s=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],c=function(t){var n=t,i=t.indexOf("["),e=t.indexOf("]");-1!=i&&-1!=e&&(t=t.substring(0,i)+t.substring(i,e).replace(/:/g,";")+t.substring(e,t.length));for(var r=s.exec(t||""),c={},h=14;h--;)c[o[h]]=r[h]||"";return-1!=i&&-1!=e&&(c.source=n,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c},h=1e3,u=60*h,a=60*u,f=24*a,d=function(t,n){n=n||{};var i=typeof t;if("string"===i&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(n){var i=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*f;case"hours":case"hour":case"hrs":case"hr":case"h":return i*a;case"minutes":case"minute":case"mins":case"min":case"m":return i*u;case"seconds":case"second":case"secs":case"sec":case"s":return i*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(t);if("number"===i&&isFinite(t))return n.long?function(t){var n=Math.abs(t);return n>=f?l(t,n,f,"day"):n>=a?l(t,n,a,"hour"):n>=u?l(t,n,u,"minute"):n>=h?l(t,n,h,"second"):t+" ms"}(t):function(t){var n=Math.abs(t);return n>=f?Math.round(t/f)+"d":n>=a?Math.round(t/a)+"h":n>=u?Math.round(t/u)+"m":n>=h?Math.round(t/h)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function l(t,n,i,e){var r=n>=1.5*i;return Math.round(t/i)+" "+e+(r?"s":"")}var p=t((function(t,n){n.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;n.splice(1,0,i,"color: inherit");let e=0,r=0;n[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(e++,"%c"===t&&(r=e))}),n.splice(r,0,i)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(i){}},n.load=function(){let t;try{t=n.storage.getItem("debug")}catch(e){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=function(t){function n(t){let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n|=0;return i.colors[Math.abs(n)%i.colors.length]}function i(t){let s;function o(...t){if(!o.enabled)return;const n=o,e=Number(new Date);n.diff=e-(s||e),n.prev=s,n.curr=e,s=e,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,s)=>{if("%%"===e)return e;r++;const o=i.formatters[s];return"function"==typeof o&&(e=o.call(n,t[r]),t.splice(r,1),r--),e}),i.formatArgs.call(n,t),(n.log||i.log).apply(n,t)}return o.namespace=t,o.enabled=i.enabled(t),o.useColors=i.useColors(),o.color=n(t),o.destroy=e,o.extend=r,"function"==typeof i.init&&i.init(o),i.instances.push(o),o}function e(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function r(t,n){const e=i(this.namespace+(void 0===n?":":n)+t);return e.log=this.log,e}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let n;i.save(t),i.names=[],i.skips=[];const e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length;for(n=0;n<r;n++)e[n]&&("-"===(t=e[n].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(n=0;n<i.instances.length;n++){const t=i.instances[n];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let n,e;for(n=0,e=i.skips.length;n<e;n++)if(i.skips[n].test(t))return!1;for(n=0,e=i.names.length;n<e;n++)if(i.names[n].test(t))return!0;return!1},i.humanize=d,Object.keys(t).forEach(n=>{i[n]=t[n]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=n,i.enable(i.load()),i}(n);const{formatters:e}=t.exports;e.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}})),C=p("socket.io-client:url"),v=function(t,n){var i=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(C("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),C("parse %s",t),i=c(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var e=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+e+":"+i.port,i.href=i.protocol+"://"+e+(n&&n.port===i.port?"":":"+i.port),i},y=36e5,F=24*y,g=function(t,n){n=n||{};var i=typeof t;if("string"===i&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(n){var i=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*F;case"hours":case"hour":case"hrs":case"hr":case"h":return i*y;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(t);if("number"===i&&!1===isNaN(t))return n.long?function(t){return w(t,F,"day")||w(t,y,"hour")||w(t,6e4,"minute")||w(t,1e3,"second")||t+" ms"}(t):function(t){return t>=F?Math.round(t/F)+"d":t>=y?Math.round(t/y)+"h":t>=6e4?Math.round(t/6e4)+"m":t>=1e3?Math.round(t/1e3)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function w(t,n,i){if(!(t<n))return t<1.5*n?Math.floor(t/n)+" "+i:Math.ceil(t/n)+" "+i+"s"}var m=t((function(t,n){function i(t){var i;function r(){if(r.enabled){var t=r,e=+new Date,s=e-(i||e);t.diff=s,t.prev=i,t.curr=e,i=e;for(var o=new Array(arguments.length),c=0;c<o.length;c++)o[c]=arguments[c];o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var h=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(i,e){if("%%"===i)return i;h++;var r=n.formatters[e];return"function"==typeof r&&(i=r.call(t,o[h]),o.splice(h,1),h--),i})),n.formatArgs.call(t,o);var u=r.log||n.log||console.log.bind(console);u.apply(t,o)}}return r.namespace=t,r.enabled=n.enabled(t),r.useColors=n.useColors(),r.color=function(t){var i,e=0;for(i in t)e=(e<<5)-e+t.charCodeAt(i),e|=0;return n.colors[Math.abs(e)%n.colors.length]}(t),r.destroy=e,"function"==typeof n.init&&n.init(r),n.instances.push(r),r}function e(){var t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}(n=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){var i;n.save(t),n.names=[],n.skips=[];var e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length;for(i=0;i<r;i++)e[i]&&("-"===(t=e[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(i=0;i<n.instances.length;i++){var s=n.instances[i];s.enabled=n.enabled(s.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;var i,e;for(i=0,e=n.skips.length;i<e;i++)if(n.skips[i].test(t))return!1;for(i=0,e=n.names.length;i<e;i++)if(n.names[i].test(t))return!0;return!1},n.humanize=g,n.instances=[],n.names=[],n.skips=[],n.formatters={}})),b=t((function(t,n){function e(){var t;try{t=n.storage.debug}catch(e){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(n=t.exports=m).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(t){var i=this.useColors;if(t[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+t[0]+(i?"%c ":" ")+"+"+n.humanize(this.diff),i){var e="color: "+this.color;t.splice(1,0,e,"color: inherit");var r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(s=r))})),t.splice(s,0,e)}},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(i){}},n.load=e,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.formatters.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},n.enable(e())})),k=t((function(t){function n(t){if(t)return function(t){for(var i in n.prototype)t[i]=n.prototype[i];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this},n.prototype.once=function(t,n){function i(){this.off(t,i),n.apply(this,arguments)}return i.fn=n,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,e=this._callbacks["$"+t];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<e.length;r++)if((i=e[r])===n||i.fn===n){e.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i)for(var e=0,r=(i=i.slice(0)).length;e<r;++e)i[e].apply(this,n);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}})),A={}.toString,E=Array.isArray||function(t){return"[object Array]"==A.call(t)},B=function(t){return j&&r.isBuffer(t)||M&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))},j="function"==typeof r&&"function"==typeof r.isBuffer,M="function"==typeof ArrayBuffer,N=Object.prototype.toString,S="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===N.call(Blob),U="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===N.call(File),x=t((function(t,n){var i=b("socket.io-parser");function e(){}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=e,n.Decoder=o;var r=n.ERROR+'"encode error"';function s(t){var e=""+t.type;if(n.BINARY_EVENT!==t.type&&n.BINARY_ACK!==t.type||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data){var s=function(t){try{return JSON.stringify(t)}catch(n){return!1}}(t.data);if(!1===s)return r;e+=s}return i("encoded %j as %s",t,e),e}function o(){this.reconstructor=null}function c(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:n.ERROR,data:"parser error: "+t}}e.prototype.encode=function(t,e){i("encoding packet %j",t),n.BINARY_EVENT===t.type||n.BINARY_ACK===t.type?function(t,n){!function(t,n){var i=0,e=t;!function t(r,s,o){if(!r)return r;if(S&&r instanceof Blob||U&&r instanceof File){i++;var c=new FileReader;c.onload=function(){o?o[s]=this.result:e=this.result,--i||n(e)},c.readAsArrayBuffer(r)}else if(E(r))for(var h=0;h<r.length;h++)t(r[h],h,r);else if("object"==typeof r&&!B(r))for(var u in r)t(r[u],u,r)}(e),i||n(e)}(t,(function(t){var i=function(t){var n=[],i=t;return i.data=function t(n,i){if(!n)return n;if(B(n)){var e={_placeholder:!0,num:i.length};return i.push(n),e}if(E(n)){for(var r=new Array(n.length),s=0;s<n.length;s++)r[s]=t(n[s],i);return r}if("object"==typeof n&&!(n instanceof Date)){for(var o in r={},n)r[o]=t(n[o],i);return r}return n}(t.data,n),i.attachments=n.length,{packet:i,buffers:n}}(t),e=s(i.packet),r=i.buffers;r.unshift(e),n(r)}))}(t,e):e([s(t)])},k(o.prototype),o.prototype.add=function(t){var e;if("string"==typeof t)e=function(t){var e=0,r={type:Number(t.charAt(0))};if(null==n.types[r.type])return h("unknown packet type "+r.type);if(n.BINARY_EVENT===r.type||n.BINARY_ACK===r.type){for(var s="";"-"!==t.charAt(++e)&&(s+=t.charAt(e),e!=t.length););if(s!=Number(s)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===t.charAt(e+1))for(r.nsp="";++e&&","!==(c=t.charAt(e))&&(r.nsp+=c,e!==t.length););else r.nsp="/";var o=t.charAt(e+1);if(""!==o&&Number(o)==o){for(r.id="";++e;){var c;if(null==(c=t.charAt(e))||Number(c)!=c){--e;break}if(r.id+=t.charAt(e),e===t.length)break}r.id=Number(r.id)}if(t.charAt(++e)){var u=function(t){try{return JSON.parse(t)}catch(n){return!1}}(t.substr(e));if(!1===u||r.type!==n.ERROR&&!E(u))return h("invalid payload");r.data=u}return i("decoded %s as %j",t,r),r}(t),n.BINARY_EVENT===e.type||n.BINARY_ACK===e.type?(this.reconstructor=new c(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!B(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var n=function(t,n){return t.data=function t(n,i){if(!n)return n;if(n&&n._placeholder)return i[n.num];if(E(n))for(var e=0;e<n.length;e++)n[e]=t(n[e],i);else if("object"==typeof n)for(var r in n)n[r]=t(n[r],i);return n}(t.data,n),t.attachments=void 0,t}(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}})),O=t((function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}})),T="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),R=function(t){var n=t.xdomain,i=t.xscheme,e=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||O))return new XMLHttpRequest}catch(r){}try{if("undefined"!=typeof XDomainRequest&&!i&&e)return new XDomainRequest}catch(r){}if(!n)try{return new(T[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}},$=Object.keys||function(t){var n=[],i=Object.prototype.hasOwnProperty;for(var e in t)i.call(t,e)&&n.push(e);return n},I={}.toString,_=Array.isArray||function(t){return"[object Array]"==I.call(t)},D=Object.prototype.toString,J="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===D.call(Blob),q="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===D.call(File),P=function t(n){if(!n||"object"!=typeof n)return!1;if(_(n)){for(var i=0,e=n.length;i<e;i++)if(t(n[i]))return!0;return!1}if("function"==typeof r&&r.isBuffer&&r.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||J&&n instanceof Blob||q&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&t(n[s]))return!0;return!1},X=function(t,n,i){var e=t.byteLength;if(n=n||0,i=i||e,t.slice)return t.slice(n,i);if(n<0&&(n+=e),i<0&&(i+=e),i>e&&(i=e),n>=e||n>=i||0===e)return new ArrayBuffer(0);for(var r=new Uint8Array(t),s=new Uint8Array(i-n),o=n,c=0;o<i;o++,c++)s[c]=r[o];return s.buffer};function z(){}
/*! https://mths.be/utf8js v2.1.2 by @mathias */var L,H,Z,K=String.fromCharCode;function W(t){for(var n,i,e=[],r=0,s=t.length;r<s;)(n=t.charCodeAt(r++))>=55296&&n<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?e.push(((1023&n)<<10)+(1023&i)+65536):(e.push(n),r--):e.push(n);return e}function V(t,n){if(t>=55296&&t<=57343){if(n)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Y(t,n){return K(t>>n&63|128)}function G(t,n){if(0==(4294967168&t))return K(t);var i="";return 0==(4294965248&t)?i=K(t>>6&31|192):0==(4294901760&t)?(V(t,n)||(t=65533),i=K(t>>12&15|224),i+=Y(t,6)):0==(4292870144&t)&&(i=K(t>>18&7|240),i+=Y(t,12),i+=Y(t,6)),i+K(63&t|128)}function Q(){if(Z>=H)throw Error("Invalid byte index");var t=255&L[Z];if(Z++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function tt(t){var n,i;if(Z>H)throw Error("Invalid byte index");if(Z==H)return!1;if(n=255&L[Z],Z++,0==(128&n))return n;if(192==(224&n)){if((i=(31&n)<<6|Q())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&n)){if((i=(15&n)<<12|Q()<<6|Q())>=2048)return V(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&n)&&(i=(7&n)<<18|Q()<<12|Q()<<6|Q())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}var nt=function(t,n){for(var i=!1!==(n=n||{}).strict,e=W(t),r=e.length,s=-1,o="";++s<r;)o+=G(e[s],i);return o},it=function(t,n){var i=!1!==(n=n||{}).strict;L=W(t),H=L.length,Z=0;for(var e,r=[];!1!==(e=tt(i));)r.push(e);return function(t){for(var n,i=t.length,e=-1,r="";++e<i;)(n=t[e])>65535&&(r+=K((n-=65536)>>>10&1023|55296),n=56320|1023&n),r+=K(n);return r}(r)},et=t((function(t,n){!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),e=0;e<t.length;e++)i[t.charCodeAt(e)]=e;n.encode=function(n){var i,e=new Uint8Array(n),r=e.length,s="";for(i=0;i<r;i+=3)s+=t[e[i]>>2],s+=t[(3&e[i])<<4|e[i+1]>>4],s+=t[(15&e[i+1])<<2|e[i+2]>>6],s+=t[63&e[i+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s},n.decode=function(t){var n,e,r,s,o,c=.75*t.length,h=t.length,u=0;"="===t[t.length-1]&&(c--,"="===t[t.length-2]&&c--);var a=new ArrayBuffer(c),f=new Uint8Array(a);for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)],r=i[t.charCodeAt(n+1)],s=i[t.charCodeAt(n+2)],o=i[t.charCodeAt(n+3)],f[u++]=e<<2|r>>4,f[u++]=(15&r)<<4|s>>2,f[u++]=(3&s)<<6|63&o;return a}}()})),rt=void 0!==rt?rt:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,st=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),ot=st&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),ct=rt&&rt.prototype.append&&rt.prototype.getBlob;function ht(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var n=t.buffer;if(t.byteLength!==n.byteLength){var i=new Uint8Array(t.byteLength);i.set(new Uint8Array(n,t.byteOffset,t.byteLength)),n=i.buffer}return n}return t}))}function ut(t,n){n=n||{};var i=new rt;return ht(t).forEach((function(t){i.append(t)})),n.type?i.getBlob(n.type):i.getBlob()}function at(t,n){return new Blob(ht(t),n||{})}"undefined"!=typeof Blob&&(ut.prototype=Blob.prototype,at.prototype=Blob.prototype);var ft=st?ot?Blob:at:ct?ut:void 0,dt=t((function(t,n){var i;"undefined"!=typeof ArrayBuffer&&(i=et);var e="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),r="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),s=e||r;n.protocol=3;var o=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},c=$(o),h={type:"error",data:"parser error"};function u(t,n,i){for(var e=new Array(t.length),r=function(t,n,i){var e=!1;return i=i||z,r.count=t,0===t?n():r;function r(t,s){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(e=!0,n(t),n=i):0!==r.count||e||n(null,s)}}(t.length,i),s=function(t,i,r){n(i,(function(n,i){e[t]=i,r(n,e)}))},o=0;o<t.length;o++)s(o,t[o],r)}n.encodePacket=function(t,i,e,r){"function"==typeof i&&(r=i,i=!1),"function"==typeof e&&(r=e,e=null);var c=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer)return function(t,i,e){if(!i)return n.encodeBase64Packet(t,e);var r=t.data,s=new Uint8Array(r),c=new Uint8Array(1+r.byteLength);c[0]=o[t.type];for(var h=0;h<s.length;h++)c[h+1]=s[h];return e(c.buffer)}(t,i,r);if(void 0!==ft&&c instanceof ft)return function(t,i,e){if(!i)return n.encodeBase64Packet(t,e);if(s)return function(t,i,e){if(!i)return n.encodeBase64Packet(t,e);var r=new FileReader;return r.onload=function(){n.encodePacket({type:t.type,data:r.result},i,!0,e)},r.readAsArrayBuffer(t.data)}(t,i,e);var r=new Uint8Array(1);return r[0]=o[t.type],e(new ft([r.buffer,t.data]))}(t,i,r);if(c&&c.base64)return function(t,i){return i("b"+n.packets[t.type]+t.data.data)}(t,r);var h=o[t.type];return void 0!==t.data&&(h+=e?nt(String(t.data),{strict:!1}):String(t.data)),r(""+h)},n.encodeBase64Packet=function(t,i){var e,r="b"+n.packets[t.type];if(void 0!==ft&&t.data instanceof ft){var s=new FileReader;return s.onload=function(){var t=s.result.split(",")[1];i(r+t)},s.readAsDataURL(t.data)}try{e=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(u){for(var o=new Uint8Array(t.data),c=new Array(o.length),h=0;h<o.length;h++)c[h]=o[h];e=String.fromCharCode.apply(null,c)}return r+=btoa(e),i(r)},n.decodePacket=function(t,i,e){if(void 0===t)return h;if("string"==typeof t){if("b"===t.charAt(0))return n.decodeBase64Packet(t.substr(1),i);if(e&&!1===(t=function(t){try{t=it(t,{strict:!1})}catch(n){return!1}return t}(t)))return h;var r=t.charAt(0);return Number(r)==r&&c[r]?t.length>1?{type:c[r],data:t.substring(1)}:{type:c[r]}:h}r=new Uint8Array(t)[0];var s=X(t,1);return ft&&"blob"===i&&(s=new ft([s])),{type:c[r],data:s}},n.decodeBase64Packet=function(t,n){var e=c[t.charAt(0)];if(!i)return{type:e,data:{base64:!0,data:t.substr(1)}};var r=i.decode(t.substr(1));return"blob"===n&&ft&&(r=new ft([r])),{type:e,data:r}},n.encodePayload=function(t,i,e){"function"==typeof i&&(e=i,i=null);var r=P(t);return i&&r?ft&&!s?n.encodePayloadAsBlob(t,e):n.encodePayloadAsArrayBuffer(t,e):t.length?void u(t,(function(t,e){n.encodePacket(t,!!r&&i,!1,(function(t){e(null,function(t){return t.length+":"+t}(t))}))}),(function(t,n){return e(n.join(""))})):e("0:")},n.decodePayload=function(t,i,e){if("string"!=typeof t)return n.decodePayloadAsBinary(t,i,e);var r;if("function"==typeof i&&(e=i,i=null),""===t)return e(h,0,1);for(var s,o,c="",u=0,a=t.length;u<a;u++){var f=t.charAt(u);if(":"===f){if(""===c||c!=(s=Number(c)))return e(h,0,1);if(c!=(o=t.substr(u+1,s)).length)return e(h,0,1);if(o.length){if(r=n.decodePacket(o,i,!1),h.type===r.type&&h.data===r.data)return e(h,0,1);if(!1===e(r,u+s,a))return}u+=s,c=""}else c+=f}return""!==c?e(h,0,1):void 0},n.encodePayloadAsArrayBuffer=function(t,i){if(!t.length)return i(new ArrayBuffer(0));u(t,(function(t,i){n.encodePacket(t,!0,!0,(function(t){return i(null,t)}))}),(function(t,n){var e=n.reduce((function(t,n){var i;return t+(i="string"==typeof n?n.length:n.byteLength).toString().length+i+2}),0),r=new Uint8Array(e),s=0;return n.forEach((function(t){var n="string"==typeof t,i=t;if(n){for(var e=new Uint8Array(t.length),o=0;o<t.length;o++)e[o]=t.charCodeAt(o);i=e.buffer}r[s++]=n?0:1;var c=i.byteLength.toString();for(o=0;o<c.length;o++)r[s++]=parseInt(c[o]);for(r[s++]=255,e=new Uint8Array(i),o=0;o<e.length;o++)r[s++]=e[o]})),i(r.buffer)}))},n.encodePayloadAsBlob=function(t,i){u(t,(function(t,i){n.encodePacket(t,!0,!0,(function(t){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);t=e.buffer,n[0]=0}var s=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(s.length+1);for(r=0;r<s.length;r++)o[r]=parseInt(s[r]);if(o[s.length]=255,ft){var c=new ft([n.buffer,o.buffer,t]);i(null,c)}}))}),(function(t,n){return i(new ft(n))}))},n.decodePayloadAsBinary=function(t,i,e){"function"==typeof i&&(e=i,i=null);for(var r=t,s=[];r.byteLength>0;){for(var o=new Uint8Array(r),c=0===o[0],u="",a=1;255!==o[a];a++){if(u.length>310)return e(h,0,1);u+=o[a]}r=X(r,2+u.length),u=parseInt(u);var f=X(r,0,u);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(p){var d=new Uint8Array(f);for(f="",a=0;a<d.length;a++)f+=String.fromCharCode(d[a])}s.push(f),r=X(r,u)}var l=s.length;s.forEach((function(t,r){e(n.decodePacket(t,i,!0),r,l)}))}})),lt=t((function(t){function n(t){if(t)return function(t){for(var i in n.prototype)t[i]=n.prototype[i];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this},n.prototype.once=function(t,n){function i(){this.off(t,i),n.apply(this,arguments)}return i.fn=n,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,e=this._callbacks["$"+t];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<e.length;r++)if((i=e[r])===n||i.fn===n){e.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i)for(var e=0,r=(i=i.slice(0)).length;e<r;++e)i[e].apply(this,n);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}})),pt=Ct;function Ct(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}lt(Ct.prototype),Ct.prototype.onError=function(t,n){var i=new Error(t);return i.type="TransportError",i.description=n,this.emit("error",i),this},Ct.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Ct.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Ct.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},Ct.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Ct.prototype.onData=function(t){var n=dt.decodePacket(t,this.socket.binaryType);this.onPacket(n)},Ct.prototype.onPacket=function(t){this.emit("packet",t)},Ct.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var vt,yt=function(t){var n="";for(var i in t)t.hasOwnProperty(i)&&(n.length&&(n+="&"),n+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n},Ft=function(t,n){var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t},gt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),wt={},mt=0,bt=0;function kt(t){var n="";do{n=gt[t%64]+n,t=Math.floor(t/64)}while(t>0);return n}function At(){var t=kt(+new Date);return t!==vt?(mt=0,vt=t):t+"."+kt(mt++)}for(;bt<64;bt++)wt[gt[bt]]=bt;At.encode=kt,At.decode=function(t){var n=0;for(bt=0;bt<t.length;bt++)n=64*n+wt[t.charAt(bt)];return n};var Et=At,Bt=6e4,jt=60*Bt,Mt=24*jt,Nt=function(t,n){n=n||{};var i=typeof t;if("string"===i&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(n){var i=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*Mt;case"hours":case"hour":case"hrs":case"hr":case"h":return i*jt;case"minutes":case"minute":case"mins":case"min":case"m":return i*Bt;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(t);if("number"===i&&isFinite(t))return n.long?function(t){var n=Math.abs(t);return n>=Mt?St(t,n,Mt,"day"):n>=jt?St(t,n,jt,"hour"):n>=Bt?St(t,n,Bt,"minute"):n>=1e3?St(t,n,1e3,"second"):t+" ms"}(t):function(t){var n=Math.abs(t);return n>=Mt?Math.round(t/Mt)+"d":n>=jt?Math.round(t/jt)+"h":n>=Bt?Math.round(t/Bt)+"m":n>=1e3?Math.round(t/1e3)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function St(t,n,i,e){var r=n>=1.5*i;return Math.round(t/i)+" "+e+(r?"s":"")}var Ut=t((function(t,n){n.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;n.splice(1,0,i,"color: inherit");let e=0,r=0;n[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(e++,"%c"===t&&(r=e))}),n.splice(r,0,i)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(i){}},n.load=function(){let t;try{t=n.storage.getItem("debug")}catch(e){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=function(t){function n(t){let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n|=0;return i.colors[Math.abs(n)%i.colors.length]}function i(t){let s;function o(...t){if(!o.enabled)return;const n=o,e=Number(new Date);n.diff=e-(s||e),n.prev=s,n.curr=e,s=e,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,s)=>{if("%%"===e)return e;r++;const o=i.formatters[s];return"function"==typeof o&&(e=o.call(n,t[r]),t.splice(r,1),r--),e}),i.formatArgs.call(n,t),(n.log||i.log).apply(n,t)}return o.namespace=t,o.enabled=i.enabled(t),o.useColors=i.useColors(),o.color=n(t),o.destroy=e,o.extend=r,"function"==typeof i.init&&i.init(o),i.instances.push(o),o}function e(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function r(t,n){const e=i(this.namespace+(void 0===n?":":n)+t);return e.log=this.log,e}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let n;i.save(t),i.names=[],i.skips=[];const e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length;for(n=0;n<r;n++)e[n]&&("-"===(t=e[n].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(n=0;n<i.instances.length;n++){const t=i.instances[n];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let n,e;for(n=0,e=i.skips.length;n<e;n++)if(i.skips[n].test(t))return!1;for(n=0,e=i.names.length;n<e;n++)if(i.names[n].test(t))return!0;return!1},i.humanize=Nt,Object.keys(t).forEach(n=>{i[n]=t[n]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=n,i.enable(i.load()),i}(n);const{formatters:e}=t.exports;e.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}})),xt=Ut("engine.io-client:polling"),Ot=Rt,Tt=null!=new R({xdomain:!1}).responseType;function Rt(t){Tt&&!(t&&t.forceBase64)||(this.supportsBinary=!1),pt.call(this,t)}Ft(Rt,pt),Rt.prototype.name="polling",Rt.prototype.doOpen=function(){this.poll()},Rt.prototype.pause=function(t){var n=this;function i(){xt("paused"),n.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var e=0;this.polling&&(xt("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){xt("pre-pause polling complete"),--e||i()}))),this.writable||(xt("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){xt("pre-pause writing complete"),--e||i()})))}else i()},Rt.prototype.poll=function(){xt("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Rt.prototype.onData=function(t){var n=this;xt("polling got data %s",t),dt.decodePayload(t,this.socket.binaryType,(function(t){if("opening"===n.readyState&&n.onOpen(),"close"===t.type)return n.onClose(),!1;n.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():xt('ignoring poll - transport state "%s"',this.readyState))},Rt.prototype.doClose=function(){var t=this;function n(){xt("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(xt("transport open - closing"),n()):(xt("transport not open - deferring close"),this.once("open",n))},Rt.prototype.write=function(t){var n=this;this.writable=!1;var i=function(){n.writable=!0,n.emit("drain")};dt.encodePayload(t,this.supportsBinary,(function(t){n.doWrite(t,i)}))},Rt.prototype.uri=function(){var t=this.query||{},n=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=Et()),this.supportsBinary||t.sid||(t.b64=1),t=yt(t),this.port&&("https"===n&&443!==Number(this.port)||"http"===n&&80!==Number(this.port))&&(i=":"+this.port),t.length&&(t="?"+t),n+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t};var $t=Ut("engine.io-client:polling-xhr"),It=Jt,_t=qt;function Dt(){}function Jt(t){if(Ot.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var n="https:"===location.protocol,i=location.port;i||(i=n?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==n}}function qt(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function Pt(){for(var t in qt.requests)qt.requests.hasOwnProperty(t)&&qt.requests[t].abort()}Ft(Jt,Ot),Jt.prototype.supportsBinary=!0,Jt.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new qt(t)},Jt.prototype.doWrite=function(t,n){var i=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),e=this;i.on("success",n),i.on("error",(function(t){e.onError("xhr post error",t)})),this.sendXhr=i},Jt.prototype.doPoll=function(){$t("xhr poll");var t=this.request(),n=this;t.on("data",(function(t){n.onData(t)})),t.on("error",(function(t){n.onError("xhr poll error",t)})),this.pollXhr=t},lt(qt.prototype),qt.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new R(t),i=this;try{$t("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var e in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.extraHeaders[e])}catch(r){}if("POST"===this.method)try{n.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(r){}try{n.setRequestHeader("Accept","*/*")}catch(r){}"withCredentials"in n&&(n.withCredentials=this.withCredentials),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState)try{var t=n.getResponseHeader("Content-Type");(i.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(n.responseType="arraybuffer")}catch(r){}4===n.readyState&&(200===n.status||1223===n.status?i.onLoad():setTimeout((function(){i.onError("number"==typeof n.status?n.status:0)}),0))},$t("xhr data %s",this.data),n.send(this.data)}catch(r){return void setTimeout((function(){i.onError(r)}),0)}"undefined"!=typeof document&&(this.index=qt.requestsCount++,qt.requests[this.index]=this)},qt.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},qt.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},qt.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},qt.prototype.cleanup=function(t){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Dt:this.xhr.onreadystatechange=Dt,t)try{this.xhr.abort()}catch(n){}"undefined"!=typeof document&&delete qt.requests[this.index],this.xhr=null}},qt.prototype.onLoad=function(){var t;try{var n;try{n=this.xhr.getResponseHeader("Content-Type")}catch(i){}t=("application/octet-stream"===n||"application/octet-stream; charset=UTF-8"===n)&&this.xhr.response||this.xhr.responseText}catch(i){this.onError(i)}null!=t&&this.onData(t)},qt.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},qt.prototype.abort=function(){this.cleanup()},qt.requestsCount=0,qt.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Pt):"function"==typeof addEventListener&&addEventListener("onpagehide"in T?"pagehide":"unload",Pt,!1)),It.Request=_t;var Xt,zt=Kt,Lt=/\n/g,Ht=/\\n/g;function Zt(){}function Kt(t){Ot.call(this,t),this.query=this.query||{},Xt||(Xt=T.___eio=T.___eio||[]),this.index=Xt.length;var n=this;Xt.push((function(t){n.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=Zt)}),!1)}Ft(Kt,Ot),Kt.prototype.supportsBinary=!1,Kt.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Ot.prototype.doClose.call(this)},Kt.prototype.doPoll=function(){var t=this,n=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.uri(),n.onerror=function(n){t.onError("jsonp poll error",n)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(n,i):(document.head||document.body).appendChild(n),this.script=n,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},Kt.prototype.doWrite=function(t,n){var i=this;if(!this.form){var e,r=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),s.name="d",r.appendChild(s),document.body.appendChild(r),this.form=r,this.area=s}function c(){h(),n()}function h(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{e=document.createElement('<iframe src="javascript:0" name="'+i.iframeId+'">')}catch(t){(e=document.createElement("iframe")).name=i.iframeId,e.src="javascript:0"}e.id=i.iframeId,i.form.appendChild(e),i.iframe=e}this.form.action=this.uri(),h(),t=t.replace(Ht,"\\\n"),this.area.value=t.replace(Lt,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&c()}:this.iframe.onload=c};const Wt=n(Object.freeze({__proto__:null,default:{}}));var Vt,Yt,Gt=Ut("engine.io-client:websocket");if("undefined"!=typeof WebSocket?Vt=WebSocket:"undefined"!=typeof self&&(Vt=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{Yt=Wt}catch(En){}var Qt=Vt||Yt,tn=nn;function nn(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=Vt&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(Qt=Yt),pt.call(this,t)}Ft(nn,pt),nn.prototype.name="websocket",nn.prototype.supportsBinary=!0,nn.prototype.doOpen=function(){if(this.check()){var t=this.uri(),n=this.protocols,i={agent:this.agent,perMessageDeflate:this.perMessageDeflate};i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(i.headers=this.extraHeaders),this.localAddress&&(i.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?n?new Qt(t,n):new Qt(t):new Qt(t,n,i)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},nn.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(n){t.onData(n.data)},this.ws.onerror=function(n){t.onError("websocket error",n)}},nn.prototype.write=function(t){var n=this;this.writable=!1;for(var i=t.length,e=0,s=i;e<s;e++)!function(t){dt.encodePacket(t,n.supportsBinary,(function(e){if(!n.usingBrowserWebSocket){var s={};t.options&&(s.compress=t.options.compress),n.perMessageDeflate&&("string"==typeof e?r.byteLength(e):e.length)<n.perMessageDeflate.threshold&&(s.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(e):n.ws.send(e,s)}catch(En){Gt("websocket closed before onclose event")}--i||(n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0))}))}(t[e])},nn.prototype.onClose=function(){pt.prototype.onClose.call(this)},nn.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},nn.prototype.uri=function(){var t=this.query||{},n=this.secure?"wss":"ws",i="";return this.port&&("wss"===n&&443!==Number(this.port)||"ws"===n&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=Et()),this.supportsBinary||(t.b64=1),(t=yt(t)).length&&(t="?"+t),n+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t},nn.prototype.check=function(){return!(!Qt||"__initialize"in Qt&&this.name===nn.prototype.name)};var en={polling:function(t){var n=!1,i=!1,e=!1!==t.jsonp;if("undefined"!=typeof location){var r="https:"===location.protocol,s=location.port;s||(s=r?443:80),n=t.hostname!==location.hostname||s!==t.port,i=t.secure!==r}if(t.xdomain=n,t.xscheme=i,"open"in new R(t)&&!t.forceJSONP)return new It(t);if(!e)throw new Error("JSONP disabled");return new zt(t)},websocket:tn},rn=[].indexOf,sn=function(t,n){if(rn)return t.indexOf(n);for(var i=0;i<t.length;++i)if(t[i]===n)return i;return-1},on=Ut("engine.io-client:socket"),cn=hn;function hn(t,n){if(!(this instanceof hn))return new hn(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=c(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=c(n.host).host),this.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=n.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=function(t){for(var n={},i=t.split("&"),e=0,r=i.length;e<r;e++){var s=i[e].split("=");n[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return n}(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.withCredentials=!1!==n.withCredentials,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}hn.priorWebsocketSuccess=!1,lt(hn.prototype),hn.protocol=dt.protocol,hn.Socket=hn,hn.Transport=pt,hn.transports=en,hn.parser=dt,hn.prototype.createTransport=function(t){on('creating transport "%s"',t);var n=function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}(this.query);n.EIO=dt.protocol,n.transport=t;var i=this.transportOptions[t]||{};return this.id&&(n.sid=this.id),new en[t]({query:n,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,withCredentials:i.withCredentials||this.withCredentials,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0,isReactNative:this.isReactNative})},hn.prototype.open=function(){var t;if(this.rememberUpgrade&&hn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var n=this;return void setTimeout((function(){n.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(En){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},hn.prototype.setTransport=function(t){on("setting transport %s",t.name);var n=this;this.transport&&(on("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){n.onDrain()})).on("packet",(function(t){n.onPacket(t)})).on("error",(function(t){n.onError(t)})).on("close",(function(){n.onClose("transport close")}))},hn.prototype.probe=function(t){on('probing transport "%s"',t);var n=this.createTransport(t,{probe:1}),i=!1,e=this;function r(){e.onlyBinaryUpgrades&&(i=i||!this.supportsBinary&&e.transport.supportsBinary),i||(on('probe transport "%s" opened',t),n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(r){if(!i)if("pong"===r.type&&"probe"===r.data){if(on('probe transport "%s" pong',t),e.upgrading=!0,e.emit("upgrading",n),!n)return;hn.priorWebsocketSuccess="websocket"===n.name,on('pausing current transport "%s"',e.transport.name),e.transport.pause((function(){i||"closed"!==e.readyState&&(on("changing transport and sending upgrade packet"),a(),e.setTransport(n),n.send([{type:"upgrade"}]),e.emit("upgrade",n),n=null,e.upgrading=!1,e.flush())}))}else{on('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=n.name,e.emit("upgradeError",s)}})))}function s(){i||(i=!0,a(),n.close(),n=null)}function o(i){var r=new Error("probe error: "+i);r.transport=n.name,s(),on('probe transport "%s" failed because of error: %s',t,i),e.emit("upgradeError",r)}function c(){o("transport closed")}function h(){o("socket closed")}function u(t){n&&t.name!==n.name&&(on('"%s" works - aborting "%s"',t.name,n.name),s())}function a(){n.removeListener("open",r),n.removeListener("error",o),n.removeListener("close",c),e.removeListener("close",h),e.removeListener("upgrading",u)}hn.priorWebsocketSuccess=!1,n.once("open",r),n.once("error",o),n.once("close",c),this.once("close",h),this.once("upgrading",u),n.open()},hn.prototype.onOpen=function(){if(on("socket open"),this.readyState="open",hn.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){on("starting upgrade probes");for(var t=0,n=this.upgrades.length;t<n;t++)this.probe(this.upgrades[t])}},hn.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(on('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else on('packet received with socket readyState "%s"',this.readyState)},hn.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},hn.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var n=this;n.pingTimeoutTimer=setTimeout((function(){"closed"!==n.readyState&&n.onClose("ping timeout")}),t||n.pingInterval+n.pingTimeout)},hn.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){on("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},hn.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},hn.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},hn.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(on("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},hn.prototype.write=hn.prototype.send=function(t,n,i){return this.sendPacket("message",t,n,i),this},hn.prototype.sendPacket=function(t,n,i,e){if("function"==typeof n&&(e=n,n=void 0),"function"==typeof i&&(e=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState){(i=i||{}).compress=!1!==i.compress;var r={type:t,data:n,options:i};this.emit("packetCreate",r),this.writeBuffer.push(r),e&&this.once("flush",e),this.flush()}},hn.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?e():n()})):this.upgrading?e():n()}function n(){t.onClose("forced close"),on("socket closing - telling transport to close"),t.transport.close()}function i(){t.removeListener("upgrade",i),t.removeListener("upgradeError",i),n()}function e(){t.once("upgrade",i),t.once("upgradeError",i)}return this},hn.prototype.onError=function(t){on("socket error %j",t),hn.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},hn.prototype.onClose=function(t,n){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(on('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)},hn.prototype.filterUpgrades=function(t){for(var n=[],i=0,e=t.length;i<e;i++)~sn(this.transports,t[i])&&n.push(t[i]);return n};var un=cn;un.parser=dt;var an=t((function(t){function n(t){if(t)return function(t){for(var i in n.prototype)t[i]=n.prototype[i];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this},n.prototype.once=function(t,n){function i(){this.off(t,i),n.apply(this,arguments)}return i.fn=n,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,e=this._callbacks["$"+t];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<e.length;r++)if((i=e[r])===n||i.fn===n){e.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i)for(var e=0,r=(i=i.slice(0)).length;e<r;++e)i[e].apply(this,n);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}})),fn=function(t,n){for(var i=[],e=(n=n||0)||0;e<t.length;e++)i[e-n]=t[e];return i},dn=function(t,n,i){return t.on(n,i),{destroy:function(){t.removeListener(n,i)}}},ln=[].slice,pn=function(t,n){if("string"==typeof n&&(n=t[n]),"function"!=typeof n)throw new Error("bind() requires a function");var i=ln.call(arguments,2);return function(){return n.apply(t,i.concat(ln.call(arguments)))}},Cn=t((function(t){var n=p("socket.io-client:socket");t.exports=r;var i={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},e=an.prototype.emit;function r(t,n,i){this.io=t,this.nsp=n,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}an(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[dn(t,"open",pn(this,"onopen")),dn(t,"packet",pn(this,"onpacket")),dn(t,"close",pn(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},r.prototype.send=function(){var t=fn(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(i.hasOwnProperty(t))return e.apply(this,arguments),this;var r=fn(arguments),s={type:(void 0!==this.flags.binary?this.flags.binary:P(r))?x.BINARY_EVENT:x.EVENT,data:r,options:{}};return s.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof r[r.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=r.pop(),s.id=this.ids++),this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){if(n("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?yt(this.query):this.query;n("sending connect packet with query %s",t),this.packet({type:x.CONNECT,query:t})}else this.packet({type:x.CONNECT})},r.prototype.onclose=function(t){n("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp||t.type===x.ERROR&&"/"===t.nsp)switch(t.type){case x.CONNECT:this.onconnect();break;case x.EVENT:case x.BINARY_EVENT:this.onevent(t);break;case x.ACK:case x.BINARY_ACK:this.onack(t);break;case x.DISCONNECT:this.ondisconnect();break;case x.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var i=t.data||[];n("emitting event %j",i),null!=t.id&&(n("attaching ack callback to event"),i.push(this.ack(t.id))),this.connected?e.apply(this,i):this.receiveBuffer.push(i)},r.prototype.ack=function(t){var i=this,e=!1;return function(){if(!e){e=!0;var r=fn(arguments);n("sending ack %j",r),i.packet({type:P(r)?x.BINARY_ACK:x.ACK,id:t,data:r})}}},r.prototype.onack=function(t){var i=this.acks[t.id];"function"==typeof i?(n("calling ack %s with %j",t.id,t.data),i.apply(this,t.data),delete this.acks[t.id]):n("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)e.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){n("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:x.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags.compress=t,this},r.prototype.binary=function(t){return this.flags.binary=t,this}})),vn=yn;function yn(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}yn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),i=Math.floor(n*this.jitter*t);t=0==(1&Math.floor(10*n))?t-i:t+i}return 0|Math.min(t,this.max)},yn.prototype.reset=function(){this.attempts=0},yn.prototype.setMin=function(t){this.ms=t},yn.prototype.setMax=function(t){this.max=t},yn.prototype.setJitter=function(t){this.jitter=t};var Fn=p("socket.io-client:manager"),gn=Object.prototype.hasOwnProperty,wn=mn;function mn(t,n){if(!(this instanceof mn))return new mn(t,n);t&&"object"==typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.nsps={},this.subs=[],this.opts=n,this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(n.randomizationFactor||.5),this.backoff=new vn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var i=n.parser||x;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this.autoConnect=!1!==n.autoConnect,this.autoConnect&&this.open()}mn.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)gn.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},mn.prototype.updateSocketIds=function(){for(var t in this.nsps)gn.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},mn.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},an(mn.prototype),mn.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},mn.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},mn.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},mn.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},mn.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},mn.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},mn.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},mn.prototype.open=mn.prototype.connect=function(t){if(Fn("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Fn("opening %s",this.uri),this.engine=un(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var e=dn(n,"open",(function(){i.onopen(),t&&t()})),r=dn(n,"error",(function(n){if(Fn("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",n),t){var e=new Error("Connection error");e.data=n,t(e)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;Fn("connect attempt will timeout after %d",s);var o=setTimeout((function(){Fn("connect attempt timed out after %d",s),e.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(o)}})}return this.subs.push(e),this.subs.push(r),this},mn.prototype.onopen=function(){Fn("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(dn(t,"data",pn(this,"ondata"))),this.subs.push(dn(t,"ping",pn(this,"onping"))),this.subs.push(dn(t,"pong",pn(this,"onpong"))),this.subs.push(dn(t,"error",pn(this,"onerror"))),this.subs.push(dn(t,"close",pn(this,"onclose"))),this.subs.push(dn(this.decoder,"decoded",pn(this,"ondecoded")))},mn.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},mn.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},mn.prototype.ondata=function(t){this.decoder.add(t)},mn.prototype.ondecoded=function(t){this.emit("packet",t)},mn.prototype.onerror=function(t){Fn("error",t),this.emitAll("error",t)},mn.prototype.socket=function(t,n){var i=this.nsps[t];if(!i){i=new Cn(this,t,n),this.nsps[t]=i;var e=this;i.on("connecting",r),i.on("connect",(function(){i.id=e.generateId(t)})),this.autoConnect&&r()}function r(){~sn(e.connecting,i)||e.connecting.push(i)}return i},mn.prototype.destroy=function(t){var n=sn(this.connecting,t);~n&&this.connecting.splice(n,1),this.connecting.length||this.close()},mn.prototype.packet=function(t){Fn("writing packet %j",t);var n=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),n.encoding?n.packetBuffer.push(t):(n.encoding=!0,this.encoder.encode(t,(function(i){for(var e=0;e<i.length;e++)n.engine.write(i[e],t.options);n.encoding=!1,n.processPacketQueue()})))},mn.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},mn.prototype.cleanup=function(){Fn("cleanup");for(var t=this.subs.length,n=0;n<t;n++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},mn.prototype.close=mn.prototype.disconnect=function(){Fn("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},mn.prototype.onclose=function(t){Fn("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},mn.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Fn("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var n=this.backoff.duration();Fn("will wait %dms before reconnect attempt",n),this.reconnecting=!0;var i=setTimeout((function(){t.skipReconnect||(Fn("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(Fn("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",n.data)):(Fn("reconnect success"),t.onreconnect())})))}),n);this.subs.push({destroy:function(){clearTimeout(i)}})}},mn.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};var bn=t((function(t,n){var i=p("socket.io-client");t.exports=n=r;var e=n.managers={};function r(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,s=v(t),o=s.source,c=s.id;return n.forceNew||n["force new connection"]||!1===n.multiplex||e[c]&&s.path in e[c].nsps?(i("ignoring socket cache for %s",o),r=wn(o,n)):(e[c]||(i("new io instance for %s",o),e[c]=wn(o,n)),r=e[c]),s.query&&!n.query&&(n.query=s.query),r.socket(s.path,n)}n.protocol=x.protocol,n.connect=r,n.Manager=wn,n.Socket=Cn})),kn=e.EventEmitter,An=function(t){var n=(t||kn).prototype.emit;function i(t){var i=t.data||[];return null!=t.id&&i.push(this.ack(t.id)),n.call(this,"*",t),n.apply(this,i)}return function(t,n){return t.onevent!==i&&(t.onevent=i),n?n():null}};export{An as e,bn as s}