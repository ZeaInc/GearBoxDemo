var __awaiter=this&&this.__awaiter||function(e,i,t,n){function o(e){return e instanceof t?e:new t((function(i){i(e)}))}return new(t||(t=Promise))((function(t,s){function r(e){try{a(n.next(e))}catch(i){s(i)}}function l(e){try{a(n["throw"](e))}catch(i){s(i)}}function a(e){e.done?t(e.value):o(e.value).then(r,l)}a((n=n.apply(e,i||[])).next())}))};var __generator=this&&this.__generator||function(e,i){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,r;return r={next:l(0),throw:l(1),return:l(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(e){return function(i){return a([e,i])}}function a(r){if(n)throw new TypeError("Generator is already executing.");while(t)try{if(n=1,o&&(s=r[0]&2?o["return"]:r[0]?o["throw"]||((s=o["return"])&&s.call(o),0):o.next)&&!(s=s.call(o,r[1])).done)return s;if(o=0,s)r=[r[0]&2,s.value];switch(r[0]){case 0:case 1:s=r;break;case 4:t.label++;return{value:r[1],done:false};case 5:t.label++;o=r[1];r=[0];continue;case 7:r=t.ops.pop();t.trys.pop();continue;default:if(!(s=t.trys,s=s.length>0&&s[s.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!s||r[1]>s[0]&&r[1]<s[3])){t.label=r[1];break}if(r[0]===6&&t.label<s[1]){t.label=s[1];s=r;break}if(s&&t.label<s[2]){t.label=s[2];t.ops.push(r);break}if(s[2])t.ops.pop();t.trys.pop();continue}r=i.call(e,t)}catch(l){r=[6,l];o=0}finally{n=s=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};System.register(["./p-6ab71ff6.system.js","./p-b9eed61c.system.js","./p-23c063d8.system.js","./p-05e839f8.system.js"],(function(e){"use strict";var i,t,n,o;return{setters:[function(e){i=e.r;t=e.c;n=e.h},function(){},function(){},function(e){o=e.Z}],execute:function(){var s=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-form-disciplines-settings{color:var(--color-freground-1);width:-webkit-min-content;width:-moz-min-content;width:min-content;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}.form-top{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:-webkit-min-content;width:-moz-min-content;width:min-content;border:1px solid var(--color-grey-3);padding:10px 10px 10px 20px;border-bottom:none;-ms-flex-positive:0;flex-grow:0}.form-bottom{border:1px solid var(--color-grey-3);-ms-flex-positive:1;flex-grow:1;font-size:13px;position:relative;height:calc(100% - 80px);padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box}zea-input-text{margin:5px}.discipline-abbreviation{text-transform:uppercase;padding:8px;width:15px;height:15px;line-height:15px;text-align:center;border-radius:20px;margin:10px 20px 10px 10px;white-space:nowrap;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}#abbreviation-input{width:100px}#disciplines-input{width:200px}.discipline-row{display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center}.discipline-edit-row:hover,.discipline-row:hover{background-color:var(--color-grey-2)}.discipline-name{-ms-flex-positive:1;flex-grow:1}.discipline-tools{visibility:hidden;padding:0 3em 0 1em}.discipline-edit-tools zea-icon,.discipline-tools zea-icon{padding:4px}.discipline-edit-tools zea-icon:hover,.discipline-tools zea-icon:hover{background-color:var(--color-background-4);border-radius:15px}.discipline-edit-tools{padding:4px;-ms-flex-positive:1;flex-grow:1;text-align:right;padding:0 3em 0 1em}.discipline-row:hover .discipline-tools{visibility:visible}.discipline-edit-row{display:-ms-flexbox;display:flex;padding-left:10px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-align:center;align-items:center;display:none}";var r=e("zea_form_disciplines_settings",function(){function e(e){i(this,e);this.contentId="none";this.disciplines=[];this.db=new o;this.rowElements={};this.editRowElements={};this.nameElements={};this.abbrElements={};this.colorElements={};this.dialogResize=t(this,"dialogResize",7)}e.prototype.getDefaultDisciplines=function(){var e=this;var i=[];var t="A\tArchitectural\t#F34235\n    C\tCivil\t#E81D62\n    E\tElectrical\t#292929\n    F\tFire Protection\t#9B26AF\n    FS\tFood Service\t#6639B6\n    G\tGeneral\t#3E50B4\n    GA\tGarage Architectural\t#2095F2\n    GE\tGarage Electrical\t#02A8F3\n    GM\tGarage Mechanical\t#00BBD3\n    GP\tGarage Plumbing\t#009587\n    GS\tGarage Structual\t#4BAE4F\n    H\tHVAC\t#8AC249\n    I\tInterior\t#CCDB38\n    IR\tIrrigation\t#FEEA3A\n    L\tLandscape\t#FEC006\n    M\tMechanical\t#FE9700\n    P\tPlumbing\t#FE5621\n    Q\tEquipment\t#785447\n    R\tResource\t#9D9D9D\n    S\tStructural\t#5F7C8A\n    T\tTelecommunications\t#F34235\n    X\tOther\t#E81D62\n    Z\tContractor / Shop Drawings\t#292929";t.split("\n").forEach((function(t,n){t=t.replace(/(^\s*|\s*$)/,"");var o=t.split("\t");i.push({type:"disciplines",_id:"disciplines|default"+n,name:o[1],abbreviation:o[0],color:o[2],contentId:e.contentId})}));return i};e.prototype.applyDefaultDisciplines=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(i){return[2,new Promise((function(i){e.disciplines=e.getDefaultDisciplines();var t=0;e.disciplines.forEach((function(n){e.db.upsertDoc(n).then((function(){t++;if(t==e.disciplines.length)i()}))}))}))]}))}))};e.prototype.resetDefatuls=function(){var e=this;return new Promise((function(i){e.db.destroyDb("disciplines").then((function(){e.applyDefaultDisciplines().then((function(){e.refreshDisciplines();i()}))}))}))};e.prototype.saveDiscipline=function(){var e=this;var i={type:"disciplines",abbreviation:this.abbrInput.value,name:this.nameInput.value,color:this.colorInput.value,contentId:this.contentId};this.abbrInput.value="";this.nameInput.value="";this.db.upsertDoc(i).then((function(){e.refreshDisciplines()}))};e.prototype.updateDiscipline=function(e){var i=this;var t={type:"disciplines",abbreviation:this.abbrElements[e].value,name:this.nameElements[e].value,color:this.colorElements[e].value,contentId:this.contentId,_id:e};this.db.upsertDoc(t).then((function(){i.refreshDisciplines()}))};e.prototype.refreshDisciplines=function(){var e=this;this.db.getDocs({type:"disciplines",limit:1e3}).then((function(i){if(!i.docs||!i.docs.length){e.disciplines=e.getDefaultDisciplines();e.applyDefaultDisciplines();return}e.disciplines=i.docs}))};e.prototype.componentWillLoad=function(){this.refreshDisciplines()};e.prototype.deleteDisclipline=function(e){var i=this;this.db.deleteDoc(e).then((function(){i.refreshDisciplines()}))};e.prototype.componentDidRender=function(){this.dialogResize.emit(this)};e.prototype.render=function(){var e=this;return n("div",{class:"zea-form-disciplines-settings"},n("div",{class:"form-top"},n("div",null,n("zea-input-text",{ref:function(i){return e.abbrInput=i},label:"Abbreviation",id:"abbreviation-input"})),n("div",null,n("zea-input-text",{ref:function(i){return e.nameInput=i},label:"Discipline",id:"disciplines-input"})),n("div",null,n("zea-input",{ref:function(i){return e.colorInput=i},type:"color",label:"Color",showLabel:false,colorPopupAlign:"top-left"})),n("div",null,n("zea-button",{variant:"solid",onClick:this.saveDiscipline.bind(this)},"ADD NEW")),n("div",null,n("zea-menu-separator",{orientation:"vertical"})),n("div",null,n("zea-menu",{type:"contextual",contextualAlign:"top-right",showAnchor:true,anchorIcon:"ellipsis-vertical"},n("zea-menu-item",{onClick:this.resetDefatuls.bind(this)},n("zea-icon",{name:"refresh-circle-outline"})," Restore Defaults")))),n("div",{class:"form-bottom"},n("zea-scroll-pane",null,this.disciplines.map((function(i){return[n("div",{ref:function(t){return e.rowElements[i._id]=t},class:"discipline-row",id:i._id,key:i._id},n("div",{class:"discipline-abbreviation",style:{backgroundColor:i.color}},i.abbreviation),n("div",{class:"discipline-name"},i.name),n("div",{class:"discipline-tools"},n("zea-icon",{name:"create-outline",size:18,onClick:function(){e.editRowElements[i._id].style.display="flex";e.rowElements[i._id].style.display="none"}}),n("zea-icon",{size:18,name:"trash-outline",onClick:function(){e.deleteDisclipline(i._id)}}))),n("div",{ref:function(t){return e.editRowElements[i._id]=t},class:"discipline-edit-row",id:i._id+"-editor",key:i._id+"-editor"},n("div",null,n("zea-input-text",{ref:function(t){return e.abbrElements[i._id]=t},label:"Abbreviation",id:"abbreviation-input",value:i.abbreviation})),n("div",null,n("zea-input-text",{ref:function(t){return e.nameElements[i._id]=t},label:"Discipline",value:i.name,id:"disciplines-input"})),n("div",null,n("zea-input",{ref:function(t){return e.colorElements[i._id]=t},type:"color",label:"Color",showLabel:false,value:i.color,colorPopupAlign:"top-left"})),n("div",{class:"discipline-edit-tools"},n("zea-icon",{name:"checkmark-outline",size:20,onClick:function(){e.editRowElements[i._id].style.display="none";e.rowElements[i._id].style.display="flex";e.updateDiscipline(i._id)}}),n("zea-icon",{size:20,name:"close-outline",onClick:function(){e.editRowElements[i._id].style.display="none";e.rowElements[i._id].style.display="flex"}})))]})))))};return e}());r.style=s;var l=".zea-form-measurements-settings{color:var(--color-freground-1)}";var a=e("zea_form_measurements_settings",function(){function e(e){i(this,e);this.test="Hello World"}e.prototype.render=function(){return n("div",{class:"zea-form-measurements-settings"},this.test)};return e}());a.style=l}}}));