import{r as t,c as e,h as r,H as n,d as o}from"./p-da09bae5.js";import{g as i}from"./p-382b6e3d.js";import{o as a,c as s,h as l}from"./p-5b51185b.js";import{h as u}from"./p-54ff9b40.js";import"./p-f249487f.js";import"./p-b57dc4fe.js";import{o as c}from"./p-0ea28b1c.js";import"./p-df6cbb31.js";import"./p-26586be0.js";const f=class{constructor(r){t(this,r),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.buttonType="button",this.disabled=!1,this.routerDirection="forward",this.strong=!1,this.type="button",this.handleClick=t=>{if("button"===this.type)a(this.href,t,this.routerDirection);else if(u(this.el)){const e=this.el.closest("form");if(e){t.preventDefault();const r=document.createElement("button");r.type=this.type,r.style.display="none",e.appendChild(r),r.click(),r.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.ionFocus=e(this,"ionFocus",7),this.ionBlur=e(this,"ionBlur",7)}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider")}get hasIconOnly(){return!!this.el.querySelector('ion-icon[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}render(){const t=i(this),{buttonType:e,type:o,disabled:a,rel:u,target:c,size:f,href:h,color:p,expand:d,hasIconOnly:b,shape:v,strong:g}=this,m=void 0===f&&this.inItem?"small":f,k=void 0===h?"button":"a",y="button"===k?{type:o}:{download:this.download,href:h,rel:u,target:c};let x=this.fill;return void 0===x&&(x=this.inToolbar||this.inListHeader?"clear":"solid"),r(n,{onClick:this.handleClick,"aria-disabled":a?"true":null,class:Object.assign(Object.assign({},s(p)),{[t]:!0,[e]:!0,[`${e}-${d}`]:void 0!==d,[`${e}-${m}`]:void 0!==m,[`${e}-${v}`]:void 0!==v,[`${e}-${x}`]:!0,[e+"-strong"]:g,"in-toolbar":l("ion-toolbar",this.el),"in-toolbar-color":l("ion-toolbar[color]",this.el),"button-has-icon-only":b,"button-disabled":a,"ion-activatable":!0,"ion-focusable":!0})},r(k,Object.assign({},y,{class:"button-native",disabled:a,onFocus:this.onFocus,onBlur:this.onBlur,part:"button"}),r("span",{class:"button-inner",part:"button-inner"},r("slot",{name:"icon-only"}),r("slot",{name:"start"}),r("slot",null),r("slot",{name:"end"})),"md"===t&&r("ion-ripple-effect",{type:this.rippleType})))}get el(){return o(this)}};f.style={ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;pointer-events:auto;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:10px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:2.8em;font-size:16px;font-weight:500;letter-spacing:-0.03em}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:10px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal;letter-spacing:0}:host(.button-large){--border-radius:12px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:hover),:host(.button-outline:hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native::after{background:#fff;opacity:0.1}}'};const h=class{constructor(r){t(this,r),this.clickFolder=e(this,"clickFolder",7)}static breadcrumbEl(t){return r("a",{href:"#",onClick:t=>{t.preventDefault()}},t)}render(){const t=[this.folder];return r("div",{class:"ZeaBreadcrumbs"},h.breadcrumbEl(this.project.name),t.length>0&&t.map(t=>r("span",null,r("ion-icon",{name:"arrow-dropright"}),h.breadcrumbEl(t.name))))}};h.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.ZeaBreadcrumbs{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:1rem}.ZeaBreadcrumbs a{color:var(--ion-color-primary)}";const p=class{constructor(e){t(this,e),this.featured=2,this.columns=4,this.folder={children:[]},this.zoomedImageClass="zea-ig-zoomed inactive",this.zoomedImageUrl=""}static isFileImage(t){return p.imagesMediaTypes.includes(t.type)}static getImageUrl(t){return"https://storage.googleapis.com/zea-drive-staging-projects-assets/"+t.idInStorage}resetImageLocation(){this.zoomedTop=this.bbox.top+"px",this.zoomedLeft=this.bbox.left+"px",this.zoomedWidth=this.bbox.width+"px",this.zoomedHeight=this.bbox.height+"px",this.zoomedOpacity="0"}zoomImageIn(t,e){this.zoomedImageUrl=p.getImageUrl(e),this.bbox=t.target.getBoundingClientRect(),this.zoomedImageClass="zea-ig-zoomed active",this.resetImageLocation(),setTimeout(()=>{this.zoomedImageClass="zea-ig-zoomed active animate",this.zoomedTop="0px",this.zoomedLeft="0px",this.zoomedWidth="100%",this.zoomedHeight="100%",this.zoomedOpacity="1"},100)}zoomImageOut(){this.resetImageLocation(),setTimeout(()=>{this.zoomedImageClass="zea-ig-zoomed inactive"},400)}render(){const t=Object.values(this.folder.children).filter(p.isFileImage),e=Math.ceil((t.length+3*this.featured)/this.columns);return r(n,{class:"ZeaImagesGallery"},r("div",{class:this.zoomedImageClass,style:{top:this.zoomedTop,left:this.zoomedLeft,width:this.zoomedWidth,height:this.zoomedHeight,opacity:this.zoomedOpacity}},r("div",{class:"zea-ig-zoomed-inner",style:{backgroundImage:"url("+this.zoomedImageUrl+")"},onClick:()=>{this.zoomImageOut()}})),r("div",{class:"zea-ig-container",style:{gridTemplateColumns:"repeat("+this.columns+", 1fr)",gridTemplateRows:"repeat("+e+", 1fr)"}},t.map((t,e)=>r("div",{style:{backgroundImage:`url(${p.getImageUrl(t)})`},class:"zea-ig-image "+(e<this.featured?" featured":""),onClick:e=>{this.zoomImageIn(e,t)},title:t.name}))))}};var d;function b(t){return(d=d||document.createElement("textarea")).innerHTML="&"+t,d.value}p.imagesMediaTypes=["image/jpeg","image/png","image/svg+xml"],p.style=":host{width:100%;height:100%}:host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-ig-container{display:grid;width:100%;height:100%;grid-template-rows:repeat(5, 1fr);grid-template-columns:repeat(4, 1fr);gap:0.7em}.zea-ig-image.featured{grid-column:span 2;grid-row:span 2}.zea-ig-image{background-repeat:no-repeat;background-size:cover;background-position:center}.zea-ig-image:hover{-webkit-filter:brightness(1.15);filter:brightness(1.15);-webkit-box-shadow:0px 0.25em 0.5em var(--color-shadow);box-shadow:0px 0.25em 0.5em var(--color-shadow);z-index:1}.zea-ig-zoomed.inactive{display:none}.zea-ig-zoomed.active{display:block;position:fixed;background-color:var(--color-background-1);padding:1%;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:all 0.5s;transition:all 0.5s;z-index:1000}.zea-ig-zoomed-inner{background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;height:100%}.zea-ig-zoomed.active.animate .zea-ig-zoomed-inner{background-size:contain}";var v=Object.prototype.hasOwnProperty;function g(t){var e=[].slice.call(arguments,1);return e.forEach((function(e){if(e){if("object"!=typeof e)throw new TypeError(e+"must be object");Object.keys(e).forEach((function(r){t[r]=e[r]}))}})),t}var m=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function k(t){return t.indexOf("\\")<0?t:t.replace(m,"$1")}function y(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||65535==(65535&t)||65534==(65535&t)||t>=0&&t<=8||11===t||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function x(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t)}var _=/&([a-z#][a-z0-9]{1,31});/gi,w=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function z(t,e){var r=0,n=b(e);return e!==n?n:35===e.charCodeAt(0)&&w.test(e)&&y(r="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10))?x(r):t}function $(t){return t.indexOf("&")<0?t:t.replace(_,z)}var Z=/[&<>"]/,q=/[&<>"]/g,T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function j(t){return T[t]}function A(t){return Z.test(t)?t.replace(q,j):t}var I={blockquote_open:function(){return"<blockquote>\n"},blockquote_close:function(t,e){return"</blockquote>"+O(t,e)},code:function(t,e){return t[e].block?"<pre><code>"+A(t[e].content)+"</code></pre>"+O(t,e):"<code>"+A(t[e].content)+"</code>"}};I.fence=function(t,e,r,n,o){var i,a,s,l,u=t[e],c="",f=r.langPrefix;if(u.params){if(a=(i=u.params.split(/\s+/g)).join(" "),l=i[0],(s=o.rules.fence_custom)&&v.call(s,l))return o.rules.fence_custom[i[0]](t,e,r,n,o);c=' class="'+f+A($(k(a)))+'"'}return"<pre><code"+c+">"+(r.highlight&&r.highlight.apply(r.highlight,[u.content].concat(i))||A(u.content))+"</code></pre>"+O(t,e)},I.fence_custom={},I.heading_open=function(t,e){return"<h"+t[e].hLevel+">"},I.heading_close=function(t,e){return"</h"+t[e].hLevel+">\n"},I.hr=function(t,e,r){return(r.xhtmlOut?"<hr />":"<hr>")+O(t,e)},I.bullet_list_open=function(){return"<ul>\n"},I.bullet_list_close=function(t,e){return"</ul>"+O(t,e)},I.list_item_open=function(){return"<li>"},I.list_item_close=function(){return"</li>\n"},I.ordered_list_open=function(t,e){var r=t[e];return"<ol"+(r.order>1?' start="'+r.order+'"':"")+">\n"},I.ordered_list_close=function(t,e){return"</ol>"+O(t,e)},I.paragraph_open=function(t,e){return t[e].tight?"":"<p>"},I.paragraph_close=function(t,e){return(t[e].tight?"":"</p>")+(t[e].tight&&e&&"inline"===t[e-1].type&&!t[e-1].content?"":O(t,e))},I.link_open=function(t,e,r){var n=t[e].title?' title="'+A($(t[e].title))+'"':"",o=r.linkTarget?' target="'+r.linkTarget+'"':"";return'<a href="'+A(t[e].href)+'"'+n+o+">"},I.link_close=function(){return"</a>"},I.image=function(t,e,r){var n=' src="'+A(t[e].src)+'"',o=t[e].title?' title="'+A($(t[e].title))+'"':"";return"<img"+n+' alt="'+(t[e].alt?A($(k(t[e].alt))):"")+'"'+o+(r.xhtmlOut?" /":"")+">"},I.table_open=function(){return"<table>\n"},I.table_close=function(){return"</table>\n"},I.thead_open=function(){return"<thead>\n"},I.thead_close=function(){return"</thead>\n"},I.tbody_open=function(){return"<tbody>\n"},I.tbody_close=function(){return"</tbody>\n"},I.tr_open=function(){return"<tr>"},I.tr_close=function(){return"</tr>\n"},I.th_open=function(t,e){var r=t[e];return"<th"+(r.align?' style="text-align:'+r.align+'"':"")+">"},I.th_close=function(){return"</th>"},I.td_open=function(t,e){var r=t[e];return"<td"+(r.align?' style="text-align:'+r.align+'"':"")+">"},I.td_close=function(){return"</td>"},I.strong_open=function(){return"<strong>"},I.strong_close=function(){return"</strong>"},I.em_open=function(){return"<em>"},I.em_close=function(){return"</em>"},I.del_open=function(){return"<del>"},I.del_close=function(){return"</del>"},I.ins_open=function(){return"<ins>"},I.ins_close=function(){return"</ins>"},I.mark_open=function(){return"<mark>"},I.mark_close=function(){return"</mark>"},I.sub=function(t,e){return"<sub>"+A(t[e].content)+"</sub>"},I.sup=function(t,e){return"<sup>"+A(t[e].content)+"</sup>"},I.hardbreak=function(t,e,r){return r.xhtmlOut?"<br />\n":"<br>\n"},I.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?"<br />\n":"<br>\n":"\n"},I.text=function(t,e){return A(t[e].content)},I.htmlblock=function(t,e){return t[e].content},I.htmltag=function(t,e){return t[e].content},I.abbr_open=function(t,e){return'<abbr title="'+A($(t[e].title))+'">'},I.abbr_close=function(){return"</abbr>"},I.footnote_ref=function(t,e){var r=Number(t[e].id+1).toString(),n="fnref"+r;return t[e].subId>0&&(n+=":"+t[e].subId),'<sup class="footnote-ref"><a href="#fn'+r+'" id="'+n+'">['+r+"]</a></sup>"},I.footnote_block_open=function(t,e,r){return(r.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'},I.footnote_block_close=function(){return"</ol>\n</section>\n"},I.footnote_open=function(t,e){return'<li id="fn'+Number(t[e].id+1).toString()+'"  class="footnote-item">'},I.footnote_close=function(){return"</li>\n"},I.footnote_anchor=function(t,e){var r="fnref"+Number(t[e].id+1).toString();return t[e].subId>0&&(r+=":"+t[e].subId),' <a href="#'+r+'" class="footnote-backref">↩</a>'},I.dl_open=function(){return"<dl>\n"},I.dt_open=function(){return"<dt>"},I.dd_open=function(){return"<dd>"},I.dl_close=function(){return"</dl>\n"},I.dt_close=function(){return"</dt>\n"},I.dd_close=function(){return"</dd>\n"};var O=I.getBreak=function(t,e){return(e=function t(e,r){return++r>=e.length-2?r:"paragraph_open"===e[r].type&&e[r].tight&&"inline"===e[r+1].type&&0===e[r+1].content.length&&"paragraph_close"===e[r+2].type&&e[r+2].tight?t(e,r+2):r}(t,e))<t.length&&"list_item_close"===t[e].type?"":"\n"};function C(){this.rules=g({},I),this.getBreak=I.getBreak}function R(){this.__rules__=[],this.__cache__=null}function E(t,e,r,n,o){this.src=t,this.env=n,this.options=r,this.parser=e,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}function L(t,e){var r,n,o,i=-1,a=t.posMax,s=t.pos,l=t.isInLabel;if(t.isInLabel)return-1;if(t.labelUnmatchedScopes)return t.labelUnmatchedScopes--,-1;for(t.pos=e+1,t.isInLabel=!0,r=1;t.pos<a;){if(91===(o=t.src.charCodeAt(t.pos)))r++;else if(93===o&&0==--r){n=!0;break}t.parser.skipToken(t)}return n?(i=t.pos,t.labelUnmatchedScopes=0):t.labelUnmatchedScopes=r-1,t.pos=s,t.isInLabel=l,i}function N(t,e,r,n){var o,i,a,s,l,u;if(42!==t.charCodeAt(0))return-1;if(91!==t.charCodeAt(1))return-1;if(-1===t.indexOf("]:"))return-1;if((i=L(o=new E(t,e,r,n,[]),1))<0||58!==t.charCodeAt(i+1))return-1;for(s=o.posMax,a=i+2;a<s&&10!==o.src.charCodeAt(a);a++);return l=t.slice(2,i),0===(u=t.slice(i+2,a).trim()).length?-1:(n.abbreviations||(n.abbreviations={}),void 0===n.abbreviations[":"+l]&&(n.abbreviations[":"+l]=u),a)}function P(t){var e=$(t);try{e=decodeURI(e)}catch(r){}return encodeURI(e)}function B(t,e){var r,n,o,i=e,a=t.posMax;if(60===t.src.charCodeAt(e)){for(e++;e<a;){if(10===(r=t.src.charCodeAt(e)))return!1;if(62===r)return o=P(k(t.src.slice(i+1,e))),!!t.parser.validateLink(o)&&(t.pos=e+1,t.linkContent=o,!0);92===r&&e+1<a?e+=2:e++}return!1}for(n=0;e<a&&32!==(r=t.src.charCodeAt(e))&&!(r<32||127===r);)if(92===r&&e+1<a)e+=2;else{if(40===r&&++n>1)break;if(41===r&&--n<0)break;e++}return i!==e&&(o=k(t.src.slice(i,e)),!!t.parser.validateLink(o)&&(t.linkContent=o,t.pos=e,!0))}function F(t,e){var r,n=e,o=t.posMax,i=t.src.charCodeAt(e);if(34!==i&&39!==i&&40!==i)return!1;for(e++,40===i&&(i=41);e<o;){if((r=t.src.charCodeAt(e))===i)return t.pos=e+1,t.linkContent=k(t.src.slice(n+1,e)),!0;92===r&&e+1<o?e+=2:e++}return!1}function U(t){return t.trim().replace(/\s+/g," ").toUpperCase()}function M(t,e,r,n){var o,i,a,s,l,u,c,f,h;if(91!==t.charCodeAt(0))return-1;if(-1===t.indexOf("]:"))return-1;if((i=L(o=new E(t,e,r,n,[]),0))<0||58!==t.charCodeAt(i+1))return-1;for(s=o.posMax,a=i+2;a<s&&(32===(l=o.src.charCodeAt(a))||10===l);a++);if(!B(o,a))return-1;for(c=o.linkContent,u=a=o.pos,a+=1;a<s&&(32===(l=o.src.charCodeAt(a))||10===l);a++);for(a<s&&u!==a&&F(o,a)?(f=o.linkContent,a=o.pos):(f="",a=u);a<s&&32===o.src.charCodeAt(a);)a++;return a<s&&10!==o.src.charCodeAt(a)?-1:(h=U(t.slice(1,i)),void 0===n.references[h]&&(n.references[h]={title:f,href:c}),a)}function W(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}C.prototype.renderInline=function(t,e,r){for(var n=this.rules,o=t.length,i=0,a="";o--;)a+=n[t[i].type](t,i++,e,r,this);return a},C.prototype.render=function(t,e,r){for(var n=this.rules,o=t.length,i=-1,a="";++i<o;)a+="inline"===t[i].type?this.renderInline(t[i].children,e,r):n[t[i].type](t,i,e,r,this);return a},R.prototype.__find__=function(t){for(var e=this.__rules__.length,r=-1;e--;)if(this.__rules__[++r].name===t)return r;return-1},R.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(r){r.enabled&&(e&&r.alt.indexOf(e)<0||t.__cache__[e].push(r.fn))}))}))},R.prototype.at=function(t,e,r){var n=this.__find__(t),o=r||{};if(-1===n)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=o.alt||[],this.__cache__=null},R.prototype.before=function(t,e,r,n){var o=this.__find__(t),i=n||{};if(-1===o)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null},R.prototype.after=function(t,e,r,n){var o=this.__find__(t),i=n||{};if(-1===o)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null},R.prototype.push=function(t,e,r){this.__rules__.push({name:t,enabled:!0,fn:e,alt:(r||{}).alt||[]}),this.__cache__=null},R.prototype.enable=function(t,e){t=Array.isArray(t)?t:[t],e&&this.__rules__.forEach((function(t){t.enabled=!1})),t.forEach((function(t){var e=this.__find__(t);if(e<0)throw new Error("Rules manager: invalid rule name "+t);this.__rules__[e].enabled=!0}),this),this.__cache__=null},R.prototype.disable=function(t){(t=Array.isArray(t)?t:[t]).forEach((function(t){var e=this.__find__(t);if(e<0)throw new Error("Rules manager: invalid rule name "+t);this.__rules__[e].enabled=!1}),this),this.__cache__=null},R.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]},E.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""},E.prototype.push=function(t){this.pending&&this.pushPending(),this.tokens.push(t),this.pendingLevel=this.level},E.prototype.cacheSet=function(t,e){for(var r=this.cache.length;r<=t;r++)this.cache.push(0);this.cache[t]=e},E.prototype.cacheGet=function(t){return t<this.cache.length?this.cache[t]:0};var D=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,H=/\((c|tm|r|p)\)/gi,S={c:"©",r:"®",p:"§",tm:"™"},G=/['"]/,J=/['"]/g,K=/[-\s()\[\]]/;function Q(t,e){return!(e<0||e>=t.length||K.test(t[e]))}function V(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}var X=[["block",function(t){t.inlineMode?t.tokens.push({type:"inline",content:t.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):t.block.parse(t.src,t.options,t.env,t.tokens)}],["abbr",function(t){var e,r,n,o,i=t.tokens;if(!t.inlineMode)for(e=1,r=i.length-1;e<r;e++)if("paragraph_open"===i[e-1].type&&"inline"===i[e].type&&"paragraph_close"===i[e+1].type){for(n=i[e].content;n.length&&!((o=N(n,t.inline,t.options,t.env))<0);)n=n.slice(o).trim();i[e].content=n,n.length||(i[e-1].tight=!0,i[e+1].tight=!0)}}],["references",function(t){var e,r,n,o,i=t.tokens;if(t.env.references=t.env.references||{},!t.inlineMode)for(e=1,r=i.length-1;e<r;e++)if("inline"===i[e].type&&"paragraph_open"===i[e-1].type&&"paragraph_close"===i[e+1].type){for(n=i[e].content;n.length&&!((o=M(n,t.inline,t.options,t.env))<0);)n=n.slice(o).trim();i[e].content=n,n.length||(i[e-1].tight=!0,i[e+1].tight=!0)}}],["inline",function(t){var e,r,n,o=t.tokens;for(r=0,n=o.length;r<n;r++)"inline"===(e=o[r]).type&&t.inline.parse(e.content,t.options,t.env,e.children)}],["footnote_tail",function(t){var e,r,n,o,i,a,s,l,u,c=0,f=!1,h={};if(t.env.footnotes&&(t.tokens=t.tokens.filter((function(t){return"footnote_reference_open"===t.type?(f=!0,l=[],u=t.label,!1):"footnote_reference_close"===t.type?(f=!1,h[":"+u]=l,!1):(f&&l.push(t),!f)})),t.env.footnotes.list)){for(a=t.env.footnotes.list,t.tokens.push({type:"footnote_block_open",level:c++}),e=0,r=a.length;e<r;e++){for(t.tokens.push({type:"footnote_open",id:e,level:c++}),a[e].tokens?((s=[]).push({type:"paragraph_open",tight:!1,level:c++}),s.push({type:"inline",content:"",level:c,children:a[e].tokens}),s.push({type:"paragraph_close",tight:!1,level:--c})):a[e].label&&(s=h[":"+a[e].label]),t.tokens=t.tokens.concat(s),i="paragraph_close"===t.tokens[t.tokens.length-1].type?t.tokens.pop():null,o=a[e].count>0?a[e].count:1,n=0;n<o;n++)t.tokens.push({type:"footnote_anchor",id:e,subId:n,level:c});i&&t.tokens.push(i),t.tokens.push({type:"footnote_close",level:--c})}t.tokens.push({type:"footnote_block_close",level:--c})}}],["abbr2",function(t){var e,r,n,o,i,a,s,l,u,c,f,h,p=t.tokens;if(t.env.abbreviations)for(t.env.abbrRegExp||(h="(^|["+" \n()[]'\".,!?-".split("").map(W).join("")+"])("+Object.keys(t.env.abbreviations).map((function(t){return t.substr(1)})).sort((function(t,e){return e.length-t.length})).map(W).join("|")+")($|["+" \n()[]'\".,!?-".split("").map(W).join("")+"])",t.env.abbrRegExp=new RegExp(h,"g")),c=t.env.abbrRegExp,r=0,n=p.length;r<n;r++)if("inline"===p[r].type)for(e=(o=p[r].children).length-1;e>=0;e--)if("text"===(i=o[e]).type){for(l=0,a=i.content,c.lastIndex=0,u=i.level,s=[];f=c.exec(a);)c.lastIndex>l&&s.push({type:"text",content:a.slice(l,f.index+f[1].length),level:u}),s.push({type:"abbr_open",title:t.env.abbreviations[":"+f[2]],level:u++}),s.push({type:"text",content:f[2],level:u}),s.push({type:"abbr_close",level:--u}),l=c.lastIndex-f[3].length;s.length&&(l<a.length&&s.push({type:"text",content:a.slice(l),level:u}),p[r].children=o=[].concat(o.slice(0,e),s,o.slice(e+1)))}}],["replacements",function(t){var e,r,n,o,i,a;if(t.options.typographer)for(i=t.tokens.length-1;i>=0;i--)if("inline"===t.tokens[i].type)for(e=(o=t.tokens[i].children).length-1;e>=0;e--)"text"===(r=o[e]).type&&(n=(a=n=r.content).indexOf("(")<0?a:a.replace(H,(function(t,e){return S[e.toLowerCase()]})),D.test(n)&&(n=n.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),r.content=n)}],["smartquotes",function(t){var e,r,n,o,i,a,s,l,u,c,f,h,p,d,b,v,g;if(t.options.typographer)for(g=[],b=t.tokens.length-1;b>=0;b--)if("inline"===t.tokens[b].type)for(v=t.tokens[b].children,g.length=0,e=0;e<v.length;e++)if("text"===(r=v[e]).type&&!G.test(r.text)){for(s=v[e].level,p=g.length-1;p>=0&&!(g[p].level<=s);p--);g.length=p+1,i=0,a=(n=r.content).length;t:for(;i<a&&(J.lastIndex=i,o=J.exec(n));)if(l=!Q(n,o.index-1),d="'"===o[0],(u=!Q(n,i=o.index+1))||l){if(f=!u,h=!l)for(p=g.length-1;p>=0&&(c=g[p],!(g[p].level<s));p--)if(c.single===d&&g[p].level===s){c=g[p],d?(v[c.token].content=V(v[c.token].content,c.pos,t.options.quotes[2]),r.content=V(r.content,o.index,t.options.quotes[3])):(v[c.token].content=V(v[c.token].content,c.pos,t.options.quotes[0]),r.content=V(r.content,o.index,t.options.quotes[1])),g.length=p;continue t}f?g.push({token:e,pos:o.index,single:d,level:s}):h&&d&&(r.content=V(r.content,o.index,"’"))}else d&&(r.content=V(r.content,o.index,"’"))}}]];function Y(){this.options={},this.ruler=new R;for(var t=0;t<X.length;t++)this.ruler.push(X[t][0],X[t][1])}function tt(t,e,r,n,o){var i,a,s,l,u,c,f;for(this.src=t,this.parser=e,this.options=r,this.env=n,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",c=0,f=!1,s=l=c=0,u=(a=this.src).length;l<u;l++){if(i=a.charCodeAt(l),!f){if(32===i){c++;continue}f=!0}10!==i&&l!==u-1||(10!==i&&l++,this.bMarks.push(s),this.eMarks.push(l),this.tShift.push(c),f=!1,c=0,s=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}function et(t,e){var r,n,o;return(n=t.bMarks[e]+t.tShift[e])>=(o=t.eMarks[e])||42!==(r=t.src.charCodeAt(n++))&&45!==r&&43!==r||n<o&&32!==t.src.charCodeAt(n)?-1:n}function rt(t,e){var r,n=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(n+1>=o)return-1;if((r=t.src.charCodeAt(n++))<48||r>57)return-1;for(;;){if(n>=o)return-1;if(!((r=t.src.charCodeAt(n++))>=48&&r<=57)){if(41===r||46===r)break;return-1}}return n<o&&32!==t.src.charCodeAt(n)?-1:n}Y.prototype.process=function(t){var e,r,n;for(e=0,r=(n=this.ruler.getRules("")).length;e<r;e++)n[e](t)},tt.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},tt.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},tt.prototype.skipSpaces=function(t){for(var e=this.src.length;t<e&&32===this.src.charCodeAt(t);t++);return t},tt.prototype.skipChars=function(t,e){for(var r=this.src.length;t<r&&this.src.charCodeAt(t)===e;t++);return t},tt.prototype.skipCharsBack=function(t,e,r){if(t<=r)return t;for(;t>r;)if(e!==this.src.charCodeAt(--t))return t+1;return t},tt.prototype.getLines=function(t,e,r,n){var o,i,a,s,l=t;if(t>=e)return"";if(l+1===e)return i=this.bMarks[l]+Math.min(this.tShift[l],r),this.src.slice(i,n?this.eMarks[l]+1:this.eMarks[l]);for(a=new Array(e-t),o=0;l<e;l++,o++)(s=this.tShift[l])>r&&(s=r),s<0&&(s=0),a[o]=this.src.slice(i=this.bMarks[l]+s,l+1<e||n?this.eMarks[l]+1:this.eMarks[l]);return a.join("")};var nt={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach((function(t){nt[t]=!0}));var ot=/^<([a-zA-Z]{1,15})[\s\/>]/,it=/^<\/([a-zA-Z]{1,15})[\s>]/;function at(t,e){var r=t.bMarks[e]+t.blkIndent;return t.src.substr(r,t.eMarks[e]-r)}function st(t,e){var r,n,o=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];return o>=i||126!==(n=t.src.charCodeAt(o++))&&58!==n||o===(r=t.skipSpaces(o))||r>=i?-1:r}var lt=[["code",function(t,e,r){var n,o;if(t.tShift[e]-t.blkIndent<4)return!1;for(o=n=e+1;n<r;)if(t.isEmpty(n))n++;else{if(!(t.tShift[n]-t.blkIndent>=4))break;o=++n}return t.line=n,t.tokens.push({type:"code",content:t.getLines(e,o,4+t.blkIndent,!0),block:!0,lines:[e,t.line],level:t.level}),!0}],["fences",function(t,e,r,n){var o,i,a,s,l,u=!1,c=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(c+3>f)return!1;if(126!==(o=t.src.charCodeAt(c))&&96!==o)return!1;if(l=c,(i=(c=t.skipChars(c,o))-l)<3)return!1;if((a=t.src.slice(c,f).trim()).indexOf("`")>=0)return!1;if(n)return!0;for(s=e;!(++s>=r||(c=l=t.bMarks[s]+t.tShift[s])<(f=t.eMarks[s])&&t.tShift[s]<t.blkIndent);)if(t.src.charCodeAt(c)===o&&!(t.tShift[s]-t.blkIndent>=4||(c=t.skipChars(c,o))-l<i||(c=t.skipSpaces(c))<f)){u=!0;break}return i=t.tShift[e],t.line=s+(u?1:0),t.tokens.push({type:"fence",params:a,content:t.getLines(e+1,s,i,!0),lines:[e,t.line],level:t.level}),!0},["paragraph","blockquote","list"]],["blockquote",function(t,e,r,n){var o,i,a,s,l,u,c,f,h,p,d,b=t.bMarks[e]+t.tShift[e],v=t.eMarks[e];if(b>v)return!1;if(62!==t.src.charCodeAt(b++))return!1;if(t.level>=t.options.maxNesting)return!1;if(n)return!0;for(32===t.src.charCodeAt(b)&&b++,l=t.blkIndent,t.blkIndent=0,s=[t.bMarks[e]],t.bMarks[e]=b,i=(b=b<v?t.skipSpaces(b):b)>=v,a=[t.tShift[e]],t.tShift[e]=b-t.bMarks[e],f=t.parser.ruler.getRules("blockquote"),o=e+1;o<r&&!((b=t.bMarks[o]+t.tShift[o])>=(v=t.eMarks[o]));o++)if(62!==t.src.charCodeAt(b++)){if(i)break;for(d=!1,h=0,p=f.length;h<p;h++)if(f[h](t,o,r,!0)){d=!0;break}if(d)break;s.push(t.bMarks[o]),a.push(t.tShift[o]),t.tShift[o]=-1337}else 32===t.src.charCodeAt(b)&&b++,s.push(t.bMarks[o]),t.bMarks[o]=b,i=(b=b<v?t.skipSpaces(b):b)>=v,a.push(t.tShift[o]),t.tShift[o]=b-t.bMarks[o];for(u=t.parentType,t.parentType="blockquote",t.tokens.push({type:"blockquote_open",lines:c=[e,0],level:t.level++}),t.parser.tokenize(t,e,o),t.tokens.push({type:"blockquote_close",level:--t.level}),t.parentType=u,c[1]=t.line,h=0;h<a.length;h++)t.bMarks[h+e]=s[h],t.tShift[h+e]=a[h];return t.blkIndent=l,!0},["paragraph","blockquote","list"]],["hr",function(t,e,r,n){var o,i,a,s=t.bMarks[e],l=t.eMarks[e];if((s+=t.tShift[e])>l)return!1;if(42!==(o=t.src.charCodeAt(s++))&&45!==o&&95!==o)return!1;for(i=1;s<l;){if((a=t.src.charCodeAt(s++))!==o&&32!==a)return!1;a===o&&i++}return!(i<3||(n||(t.line=e+1,t.tokens.push({type:"hr",lines:[e,t.line],level:t.level})),0))},["paragraph","blockquote","list"]],["list",function(t,e,r,n){var o,i,a,s,l,u,c,f,h,p,d,b,v,g,m,k,y,x,_,w,z,$=!0;if((f=rt(t,e))>=0)b=!0;else{if(!((f=et(t,e))>=0))return!1;b=!1}if(t.level>=t.options.maxNesting)return!1;if(d=t.src.charCodeAt(f-1),n)return!0;for(g=t.tokens.length,b?(c=t.bMarks[e]+t.tShift[e],p=Number(t.src.substr(c,f-c-1)),t.tokens.push({type:"ordered_list_open",order:p,lines:k=[e,0],level:t.level++})):t.tokens.push({type:"bullet_list_open",lines:k=[e,0],level:t.level++}),o=e,m=!1,x=t.parser.ruler.getRules("list");!(!(o<r)||((h=(v=t.skipSpaces(f))>=t.eMarks[o]?1:v-f)>4&&(h=1),h<1&&(h=1),i=f-t.bMarks[o]+h,t.tokens.push({type:"list_item_open",lines:y=[e,0],level:t.level++}),s=t.blkIndent,l=t.tight,a=t.tShift[e],u=t.parentType,t.tShift[e]=v-t.bMarks[e],t.blkIndent=i,t.tight=!0,t.parentType="list",t.parser.tokenize(t,e,r,!0),t.tight&&!m||($=!1),m=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=s,t.tShift[e]=a,t.tight=l,t.parentType=u,t.tokens.push({type:"list_item_close",level:--t.level}),o=e=t.line,y[1]=o,v=t.bMarks[e],o>=r)||t.isEmpty(o)||t.tShift[o]<t.blkIndent);){for(z=!1,_=0,w=x.length;_<w;_++)if(x[_](t,o,r,!0)){z=!0;break}if(z)break;if(b){if((f=rt(t,o))<0)break}else if((f=et(t,o))<0)break;if(d!==t.src.charCodeAt(f-1))break}return t.tokens.push({type:b?"ordered_list_close":"bullet_list_close",level:--t.level}),k[1]=o,t.line=o,$&&function(t,e){var r,n,o=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===o&&"paragraph_open"===t.tokens[r].type&&(t.tokens[r+2].tight=!0,t.tokens[r].tight=!0,r+=2)}(t,g),!0},["paragraph","blockquote"]],["footnote",function(t,e,r,n){var o,i,a,s,l,u=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(u+4>c)return!1;if(91!==t.src.charCodeAt(u))return!1;if(94!==t.src.charCodeAt(u+1))return!1;if(t.level>=t.options.maxNesting)return!1;for(s=u+2;s<c;s++){if(32===t.src.charCodeAt(s))return!1;if(93===t.src.charCodeAt(s))break}return!(s===u+2||s+1>=c||58!==t.src.charCodeAt(++s)||(n||(s++,t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.refs||(t.env.footnotes.refs={}),l=t.src.slice(u+2,s-2),t.env.footnotes.refs[":"+l]=-1,t.tokens.push({type:"footnote_reference_open",label:l,level:t.level++}),o=t.bMarks[e],i=t.tShift[e],a=t.parentType,t.tShift[e]=t.skipSpaces(s)-s,t.bMarks[e]=s,t.blkIndent+=4,t.parentType="footnote",t.tShift[e]<t.blkIndent&&(t.tShift[e]+=t.blkIndent,t.bMarks[e]-=t.blkIndent),t.parser.tokenize(t,e,r,!0),t.parentType=a,t.blkIndent-=4,t.tShift[e]=i,t.bMarks[e]=o,t.tokens.push({type:"footnote_reference_close",level:--t.level})),0))},["paragraph"]],["heading",function(t,e,r,n){var o,i,a,s=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(s>=l)return!1;if(35!==(o=t.src.charCodeAt(s))||s>=l)return!1;for(i=1,o=t.src.charCodeAt(++s);35===o&&s<l&&i<=6;)i++,o=t.src.charCodeAt(++s);return!(i>6||s<l&&32!==o||(n||(l=t.skipCharsBack(l,32,s),(a=t.skipCharsBack(l,35,s))>s&&32===t.src.charCodeAt(a-1)&&(l=a),t.line=e+1,t.tokens.push({type:"heading_open",hLevel:i,lines:[e,t.line],level:t.level}),s<l&&t.tokens.push({type:"inline",content:t.src.slice(s,l).trim(),level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"heading_close",hLevel:i,level:t.level})),0))},["paragraph","blockquote"]],["lheading",function(t,e,r){var n,o,i,a=e+1;return!(a>=r||t.tShift[a]<t.blkIndent||t.tShift[a]-t.blkIndent>3||(o=t.bMarks[a]+t.tShift[a])>=(i=t.eMarks[a])||45!==(n=t.src.charCodeAt(o))&&61!==n||(o=t.skipChars(o,n),(o=t.skipSpaces(o))<i||(o=t.bMarks[e]+t.tShift[e],t.line=a+1,t.tokens.push({type:"heading_open",hLevel:61===n?1:2,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:t.src.slice(o,t.eMarks[e]).trim(),level:t.level+1,lines:[e,t.line-1],children:[]}),t.tokens.push({type:"heading_close",hLevel:61===n?1:2,level:t.level}),0)))}],["htmlblock",function(t,e,r,n){var o,i,a,s=t.bMarks[e],l=t.eMarks[e],u=t.tShift[e];if(s+=u,!t.options.html)return!1;if(u>3||s+2>=l)return!1;if(60!==t.src.charCodeAt(s))return!1;if(33===(o=t.src.charCodeAt(s+1))||63===o){if(n)return!0}else{if(47!==o&&!function(t){var e=32|t;return e>=97&&e<=122}(o))return!1;if(47===o){if(!(i=t.src.slice(s,l).match(it)))return!1}else if(!(i=t.src.slice(s,l).match(ot)))return!1;if(!0!==nt[i[1].toLowerCase()])return!1;if(n)return!0}for(a=e+1;a<t.lineMax&&!t.isEmpty(a);)a++;return t.line=a,t.tokens.push({type:"htmlblock",level:t.level,lines:[e,t.line],content:t.getLines(e,a,0,!0)}),!0},["paragraph","blockquote"]],["table",function(t,e,r,n){var o,i,a,s,l,u,c,f,h,p,d;if(e+2>r)return!1;if(t.tShift[l=e+1]<t.blkIndent)return!1;if((a=t.bMarks[l]+t.tShift[l])>=t.eMarks[l])return!1;if(124!==(o=t.src.charCodeAt(a))&&45!==o&&58!==o)return!1;if(i=at(t,e+1),!/^[-:| ]+$/.test(i))return!1;if((u=i.split("|"))<=2)return!1;for(f=[],s=0;s<u.length;s++){if(!(h=u[s].trim())){if(0===s||s===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(h))return!1;58===h.charCodeAt(h.length-1)?f.push(58===h.charCodeAt(0)?"center":"right"):58===h.charCodeAt(0)?f.push("left"):f.push("")}if(-1===(i=at(t,e).trim()).indexOf("|"))return!1;if(u=i.replace(/^\||\|$/g,"").split("|"),f.length!==u.length)return!1;if(n)return!0;for(t.tokens.push({type:"table_open",lines:p=[e,0],level:t.level++}),t.tokens.push({type:"thead_open",lines:[e,e+1],level:t.level++}),t.tokens.push({type:"tr_open",lines:[e,e+1],level:t.level++}),s=0;s<u.length;s++)t.tokens.push({type:"th_open",align:f[s],lines:[e,e+1],level:t.level++}),t.tokens.push({type:"inline",content:u[s].trim(),lines:[e,e+1],level:t.level,children:[]}),t.tokens.push({type:"th_close",level:--t.level});for(t.tokens.push({type:"tr_close",level:--t.level}),t.tokens.push({type:"thead_close",level:--t.level}),t.tokens.push({type:"tbody_open",lines:d=[e+2,0],level:t.level++}),l=e+2;l<r&&!(t.tShift[l]<t.blkIndent)&&-1!==(i=at(t,l).trim()).indexOf("|");l++){for(u=i.replace(/^\||\|$/g,"").split("|"),t.tokens.push({type:"tr_open",level:t.level++}),s=0;s<u.length;s++)t.tokens.push({type:"td_open",align:f[s],level:t.level++}),c=u[s].substring(124===u[s].charCodeAt(0)?1:0,124===u[s].charCodeAt(u[s].length-1)?u[s].length-1:u[s].length).trim(),t.tokens.push({type:"inline",content:c,level:t.level,children:[]}),t.tokens.push({type:"td_close",level:--t.level});t.tokens.push({type:"tr_close",level:--t.level})}return t.tokens.push({type:"tbody_close",level:--t.level}),t.tokens.push({type:"table_close",level:--t.level}),p[1]=d[1]=l,t.line=l,!0},["paragraph"]],["deflist",function(t,e,r,n){var o,i,a,s,l,u,c,f,h,p,d,b,v,g;if(n)return!(t.ddIndent<0)&&st(t,e)>=0;if(t.isEmpty(c=e+1)&&++c>r)return!1;if(t.tShift[c]<t.blkIndent)return!1;if((o=st(t,c))<0)return!1;if(t.level>=t.options.maxNesting)return!1;u=t.tokens.length,t.tokens.push({type:"dl_open",lines:l=[e,0],level:t.level++}),a=e,i=c;t:for(;;){for(g=!0,v=!1,t.tokens.push({type:"dt_open",lines:[a,a],level:t.level++}),t.tokens.push({type:"inline",content:t.getLines(a,a+1,t.blkIndent,!1).trim(),level:t.level+1,lines:[a,a],children:[]}),t.tokens.push({type:"dt_close",level:--t.level});;){if(t.tokens.push({type:"dd_open",lines:s=[c,0],level:t.level++}),b=t.tight,h=t.ddIndent,f=t.blkIndent,d=t.tShift[i],p=t.parentType,t.blkIndent=t.ddIndent=t.tShift[i]+2,t.tShift[i]=o-t.bMarks[i],t.tight=!0,t.parentType="deflist",t.parser.tokenize(t,i,r,!0),t.tight&&!v||(g=!1),v=t.line-i>1&&t.isEmpty(t.line-1),t.tShift[i]=d,t.tight=b,t.parentType=p,t.blkIndent=f,t.ddIndent=h,t.tokens.push({type:"dd_close",level:--t.level}),s[1]=c=t.line,c>=r)break t;if(t.tShift[c]<t.blkIndent)break t;if((o=st(t,c))<0)break;i=c}if(c>=r)break;if(t.isEmpty(a=c))break;if(t.tShift[a]<t.blkIndent)break;if((i=a+1)>=r)break;if(t.isEmpty(i)&&i++,i>=r)break;if(t.tShift[i]<t.blkIndent)break;if((o=st(t,i))<0)break}return t.tokens.push({type:"dl_close",level:--t.level}),l[1]=c,t.line=c,g&&function(t,e){var r,n,o=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===o&&"paragraph_open"===t.tokens[r].type&&(t.tokens[r+2].tight=!0,t.tokens[r].tight=!0,r+=2)}(t,u),!0},["paragraph"]],["paragraph",function(t,e){var r,n,o,i,a,s,l=e+1;if(l<(r=t.lineMax)&&!t.isEmpty(l))for(s=t.parser.ruler.getRules("paragraph");l<r&&!t.isEmpty(l);l++)if(!(t.tShift[l]-t.blkIndent>3)){for(o=!1,i=0,a=s.length;i<a;i++)if(s[i](t,l,r,!0)){o=!0;break}if(o)break}return n=t.getLines(e,l,t.blkIndent,!1).trim(),t.line=l,n.length&&(t.tokens.push({type:"paragraph_open",tight:!1,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:n,level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"paragraph_close",tight:!1,level:t.level})),!0}]];function ut(){this.ruler=new R;for(var t=0;t<lt.length;t++)this.ruler.push(lt[t][0],lt[t][1],{alt:(lt[t][2]||[]).slice()})}ut.prototype.tokenize=function(t,e,r){for(var n,o=this.ruler.getRules(""),i=o.length,a=e,s=!1;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r))&&!(t.tShift[a]<t.blkIndent);){for(n=0;n<i&&!o[n](t,a,r,!1);n++);if(t.tight=!s,t.isEmpty(t.line-1)&&(s=!0),(a=t.line)<r&&t.isEmpty(a)){if(s=!0,++a<r&&"list"===t.parentType&&t.isEmpty(a))break;t.line=a}}};var ct=/[\n\t]/g,ft=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,ht=/\u00a0/g;function pt(t){switch(t){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}ut.prototype.parse=function(t,e,r,n){var o,i=0,a=0;if(!t)return[];(t=(t=t.replace(ht," ")).replace(ft,"\n")).indexOf("\t")>=0&&(t=t.replace(ct,(function(e,r){var n;return 10===t.charCodeAt(r)?(i=r+1,a=0,e):(n="    ".slice((r-i-a)%4),a=r-i+1,n)}))),o=new tt(t,this,e,r,n),this.tokenize(o,o.line,o.lineMax)};for(var dt=[],bt=0;bt<256;bt++)dt.push(0);function vt(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}function gt(t,e){var r,n,o,i=e,a=!0,s=!0,l=t.posMax,u=t.src.charCodeAt(e);for(r=e>0?t.src.charCodeAt(e-1):-1;i<l&&t.src.charCodeAt(i)===u;)i++;return i>=l&&(a=!1),(o=i-e)>=4?a=s=!1:(32!==(n=i<l?t.src.charCodeAt(i):-1)&&10!==n||(a=!1),32!==r&&10!==r||(s=!1),95===u&&(vt(r)&&(a=!1),vt(n)&&(s=!1))),{can_open:a,can_close:s,delims:o}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){dt[t.charCodeAt(0)]=1}));var mt=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,kt=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,yt=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],xt=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,_t=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function wt(t,e){return t=t.source,e=e||"",function r(n,o){return n?(t=t.replace(n,o=o.source||o),r):new RegExp(t,e)}}var zt=wt(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",/[^"'=<>`\x00-\x20]+/)("single_quoted",/'[^']*'/)("double_quoted",/"[^"]*"/)(),$t=wt(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",/[a-zA-Z_:][a-zA-Z0-9:._-]*/)("attr_value",zt)(),Zt=wt(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",$t)(),qt=wt(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",Zt)("close_tag",/<\/[A-Za-z][A-Za-z0-9]*\s*>/)("comment",/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/)("processing",/<[?].*?[?]>/)("declaration",/<![A-Z]+\s+[^>]*>/)("cdata",/<!\[CDATA\[[\s\S]*?\]\]>/)(),Tt=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,jt=/^&([a-z][a-z0-9]{1,31});/i,At=[["text",function(t,e){for(var r=t.pos;r<t.posMax&&!pt(t.src.charCodeAt(r));)r++;return r!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}],["newline",function(t,e){var r,n,o=t.pos;if(10!==t.src.charCodeAt(o))return!1;if(r=t.pending.length-1,n=t.posMax,!e)if(r>=0&&32===t.pending.charCodeAt(r))if(r>=1&&32===t.pending.charCodeAt(r-1)){for(var i=r-2;i>=0;i--)if(32!==t.pending.charCodeAt(i)){t.pending=t.pending.substring(0,i+1);break}t.push({type:"hardbreak",level:t.level})}else t.pending=t.pending.slice(0,-1),t.push({type:"softbreak",level:t.level});else t.push({type:"softbreak",level:t.level});for(o++;o<n&&32===t.src.charCodeAt(o);)o++;return t.pos=o,!0}],["escape",function(t,e){var r,n=t.pos,o=t.posMax;if(92!==t.src.charCodeAt(n))return!1;if(++n<o){if((r=t.src.charCodeAt(n))<256&&0!==dt[r])return e||(t.pending+=t.src[n]),t.pos+=2,!0;if(10===r){for(e||t.push({type:"hardbreak",level:t.level}),n++;n<o&&32===t.src.charCodeAt(n);)n++;return t.pos=n,!0}}return e||(t.pending+="\\"),t.pos++,!0}],["backticks",function(t,e){var r,n,o,i,a,s=t.pos;if(96!==t.src.charCodeAt(s))return!1;for(r=s,s++,n=t.posMax;s<n&&96===t.src.charCodeAt(s);)s++;for(o=t.src.slice(r,s),i=a=s;-1!==(i=t.src.indexOf("`",a));){for(a=i+1;a<n&&96===t.src.charCodeAt(a);)a++;if(a-i===o.length)return e||t.push({type:"code",content:t.src.slice(s,i).replace(/[ \n]+/g," ").trim(),block:!1,level:t.level}),t.pos=a,!0}return e||(t.pending+=o),t.pos+=o.length,!0}],["del",function(t,e){var r,n,o,i,a,s=t.posMax,l=t.pos;if(126!==t.src.charCodeAt(l))return!1;if(e)return!1;if(l+4>=s)return!1;if(126!==t.src.charCodeAt(l+1))return!1;if(t.level>=t.options.maxNesting)return!1;if(i=l>0?t.src.charCodeAt(l-1):-1,a=t.src.charCodeAt(l+2),126===i)return!1;if(126===a)return!1;if(32===a||10===a)return!1;for(n=l+2;n<s&&126===t.src.charCodeAt(n);)n++;if(n>l+3)return t.pos+=n-l,e||(t.pending+=t.src.slice(l,n)),!0;for(t.pos=l+2,o=1;t.pos+1<s;){if(126===t.src.charCodeAt(t.pos)&&126===t.src.charCodeAt(t.pos+1)&&(i=t.src.charCodeAt(t.pos-1),126!==(a=t.pos+2<s?t.src.charCodeAt(t.pos+2):-1)&&126!==i&&(32!==i&&10!==i?o--:32!==a&&10!==a&&o++,o<=0))){r=!0;break}t.parser.skipToken(t)}return r?(t.posMax=t.pos,t.pos=l+2,e||(t.push({type:"del_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"del_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=s,!0):(t.pos=l,!1)}],["ins",function(t,e){var r,n,o,i,a,s=t.posMax,l=t.pos;if(43!==t.src.charCodeAt(l))return!1;if(e)return!1;if(l+4>=s)return!1;if(43!==t.src.charCodeAt(l+1))return!1;if(t.level>=t.options.maxNesting)return!1;if(i=l>0?t.src.charCodeAt(l-1):-1,a=t.src.charCodeAt(l+2),43===i)return!1;if(43===a)return!1;if(32===a||10===a)return!1;for(n=l+2;n<s&&43===t.src.charCodeAt(n);)n++;if(n!==l+2)return t.pos+=n-l,e||(t.pending+=t.src.slice(l,n)),!0;for(t.pos=l+2,o=1;t.pos+1<s;){if(43===t.src.charCodeAt(t.pos)&&43===t.src.charCodeAt(t.pos+1)&&(i=t.src.charCodeAt(t.pos-1),43!==(a=t.pos+2<s?t.src.charCodeAt(t.pos+2):-1)&&43!==i&&(32!==i&&10!==i?o--:32!==a&&10!==a&&o++,o<=0))){r=!0;break}t.parser.skipToken(t)}return r?(t.posMax=t.pos,t.pos=l+2,e||(t.push({type:"ins_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"ins_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=s,!0):(t.pos=l,!1)}],["mark",function(t,e){var r,n,o,i,a,s=t.posMax,l=t.pos;if(61!==t.src.charCodeAt(l))return!1;if(e)return!1;if(l+4>=s)return!1;if(61!==t.src.charCodeAt(l+1))return!1;if(t.level>=t.options.maxNesting)return!1;if(i=l>0?t.src.charCodeAt(l-1):-1,a=t.src.charCodeAt(l+2),61===i)return!1;if(61===a)return!1;if(32===a||10===a)return!1;for(n=l+2;n<s&&61===t.src.charCodeAt(n);)n++;if(n!==l+2)return t.pos+=n-l,e||(t.pending+=t.src.slice(l,n)),!0;for(t.pos=l+2,o=1;t.pos+1<s;){if(61===t.src.charCodeAt(t.pos)&&61===t.src.charCodeAt(t.pos+1)&&(i=t.src.charCodeAt(t.pos-1),61!==(a=t.pos+2<s?t.src.charCodeAt(t.pos+2):-1)&&61!==i&&(32!==i&&10!==i?o--:32!==a&&10!==a&&o++,o<=0))){r=!0;break}t.parser.skipToken(t)}return r?(t.posMax=t.pos,t.pos=l+2,e||(t.push({type:"mark_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"mark_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=s,!0):(t.pos=l,!1)}],["emphasis",function(t,e){var r,n,o,i,a,s,l,u=t.posMax,c=t.pos,f=t.src.charCodeAt(c);if(95!==f&&42!==f)return!1;if(e)return!1;if(r=(l=gt(t,c)).delims,!l.can_open)return t.pos+=r,e||(t.pending+=t.src.slice(c,t.pos)),!0;if(t.level>=t.options.maxNesting)return!1;for(t.pos=c+r,s=[r];t.pos<u;)if(t.src.charCodeAt(t.pos)!==f)t.parser.skipToken(t);else{if(n=(l=gt(t,t.pos)).delims,l.can_close){for(i=s.pop(),a=n;i!==a;){if(a<i){s.push(i-a);break}if(a-=i,0===s.length)break;t.pos+=i,i=s.pop()}if(0===s.length){r=i,o=!0;break}t.pos+=n;continue}l.can_open&&s.push(n),t.pos+=n}return o?(t.posMax=t.pos,t.pos=c+r,e||(2!==r&&3!==r||t.push({type:"strong_open",level:t.level++}),1!==r&&3!==r||t.push({type:"em_open",level:t.level++}),t.parser.tokenize(t),1!==r&&3!==r||t.push({type:"em_close",level:--t.level}),2!==r&&3!==r||t.push({type:"strong_close",level:--t.level})),t.pos=t.posMax+r,t.posMax=u,!0):(t.pos=c,!1)}],["sub",function(t,e){var r,n,o=t.posMax,i=t.pos;if(126!==t.src.charCodeAt(i))return!1;if(e)return!1;if(i+2>=o)return!1;if(t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(126===t.src.charCodeAt(t.pos)){r=!0;break}t.parser.skipToken(t)}return r&&i+1!==t.pos?(n=t.src.slice(i+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sub",level:t.level,content:n.replace(mt,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0):(t.pos=i,!1)}],["sup",function(t,e){var r,n,o=t.posMax,i=t.pos;if(94!==t.src.charCodeAt(i))return!1;if(e)return!1;if(i+2>=o)return!1;if(t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(94===t.src.charCodeAt(t.pos)){r=!0;break}t.parser.skipToken(t)}return r&&i+1!==t.pos?(n=t.src.slice(i+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sup",level:t.level,content:n.replace(kt,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0):(t.pos=i,!1)}],["links",function(t,e){var r,n,o,i,a,s,l,u,c=!1,f=t.pos,h=t.posMax,p=t.pos,d=t.src.charCodeAt(p);if(33===d&&(c=!0,d=t.src.charCodeAt(++p)),91!==d)return!1;if(t.level>=t.options.maxNesting)return!1;if(r=p+1,(n=L(t,p))<0)return!1;if((s=n+1)<h&&40===t.src.charCodeAt(s)){for(s++;s<h&&(32===(u=t.src.charCodeAt(s))||10===u);s++);if(s>=h)return!1;for(p=s,B(t,s)?(i=t.linkContent,s=t.pos):i="",p=s;s<h&&(32===(u=t.src.charCodeAt(s))||10===u);s++);if(s<h&&p!==s&&F(t,s))for(a=t.linkContent,s=t.pos;s<h&&(32===(u=t.src.charCodeAt(s))||10===u);s++);else a="";if(s>=h||41!==t.src.charCodeAt(s))return t.pos=f,!1;s++}else{if(t.linkLevel>0)return!1;for(;s<h&&(32===(u=t.src.charCodeAt(s))||10===u);s++);if(s<h&&91===t.src.charCodeAt(s)&&(p=s+1,(s=L(t,s))>=0?o=t.src.slice(p,s++):s=p-1),o||(void 0===o&&(s=n+1),o=t.src.slice(r,n)),!(l=t.env.references[U(o)]))return t.pos=f,!1;i=l.href,a=l.title}return e||(t.pos=r,t.posMax=n,c?t.push({type:"image",src:i,title:a,alt:t.src.substr(r,n-r),level:t.level}):(t.push({type:"link_open",href:i,title:a,level:t.level++}),t.linkLevel++,t.parser.tokenize(t),t.linkLevel--,t.push({type:"link_close",level:--t.level}))),t.pos=s,t.posMax=h,!0}],["footnote_inline",function(t,e){var r,n,o,i,a=t.posMax,s=t.pos;return!(s+2>=a||94!==t.src.charCodeAt(s)||91!==t.src.charCodeAt(s+1)||t.level>=t.options.maxNesting||(r=s+2,(n=L(t,s+1))<0||(e||(t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.list||(t.env.footnotes.list=[]),o=t.env.footnotes.list.length,t.pos=r,t.posMax=n,t.push({type:"footnote_ref",id:o,level:t.level}),t.linkLevel++,i=t.tokens.length,t.parser.tokenize(t),t.env.footnotes.list[o]={tokens:t.tokens.splice(i)},t.linkLevel--),t.pos=n+1,t.posMax=a,0)))}],["footnote_ref",function(t,e){var r,n,o,i,a=t.posMax,s=t.pos;if(s+3>a)return!1;if(!t.env.footnotes||!t.env.footnotes.refs)return!1;if(91!==t.src.charCodeAt(s))return!1;if(94!==t.src.charCodeAt(s+1))return!1;if(t.level>=t.options.maxNesting)return!1;for(n=s+2;n<a;n++){if(32===t.src.charCodeAt(n))return!1;if(10===t.src.charCodeAt(n))return!1;if(93===t.src.charCodeAt(n))break}return!(n===s+2||n>=a||(n++,r=t.src.slice(s+2,n-1),void 0===t.env.footnotes.refs[":"+r]||(e||(t.env.footnotes.list||(t.env.footnotes.list=[]),t.env.footnotes.refs[":"+r]<0?(t.env.footnotes.list[o=t.env.footnotes.list.length]={label:r,count:0},t.env.footnotes.refs[":"+r]=o):o=t.env.footnotes.refs[":"+r],i=t.env.footnotes.list[o].count,t.env.footnotes.list[o].count++,t.push({type:"footnote_ref",id:o,subId:i,level:t.level})),t.pos=n,t.posMax=a,0)))}],["autolink",function(t,e){var r,n,o,i,a,s=t.pos;return!(60!==t.src.charCodeAt(s)||(r=t.src.slice(s)).indexOf(">")<0||((n=r.match(_t))?yt.indexOf(n[1].toLowerCase())<0||(a=P(i=n[0].slice(1,-1)),!t.parser.validateLink(i)||(e||(t.push({type:"link_open",href:a,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=n[0].length,0)):!(o=r.match(xt))||(a=P("mailto:"+(i=o[0].slice(1,-1))),!t.parser.validateLink(a)||(e||(t.push({type:"link_open",href:a,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=o[0].length,0))))}],["htmltag",function(t,e){var r,n,o,i=t.pos;return!(!t.options.html||(o=t.posMax,60!==t.src.charCodeAt(i)||i+2>=o||33!==(r=t.src.charCodeAt(i+1))&&63!==r&&47!==r&&!function(t){var e=32|t;return e>=97&&e<=122}(r)||!(n=t.src.slice(i).match(qt))||(e||t.push({type:"htmltag",content:t.src.slice(i,i+n[0].length),level:t.level}),t.pos+=n[0].length,0)))}],["entity",function(t,e){var r,n,o=t.pos,i=t.posMax;if(38!==t.src.charCodeAt(o))return!1;if(o+1<i)if(35===t.src.charCodeAt(o+1)){if(n=t.src.slice(o).match(Tt))return e||(r="x"===n[1][0].toLowerCase()?parseInt(n[1].slice(1),16):parseInt(n[1],10),t.pending+=y(r)?x(r):x(65533)),t.pos+=n[0].length,!0}else if(n=t.src.slice(o).match(jt)){var a=b(n[1]);if(n[1]!==a)return e||(t.pending+=a),t.pos+=n[0].length,!0}return e||(t.pending+="&"),t.pos++,!0}]];function It(){this.ruler=new R;for(var t=0;t<At.length;t++)this.ruler.push(At[t][0],At[t][1]);this.validateLink=Ot}function Ot(t){var e=t.trim().toLowerCase();return-1===(e=$(e)).indexOf(":")||-1===["vbscript","javascript","file","data"].indexOf(e.split(":")[0])}It.prototype.skipToken=function(t){var e,r,n=this.ruler.getRules(""),o=n.length,i=t.pos;if((r=t.cacheGet(i))>0)t.pos=r;else{for(e=0;e<o;e++)if(n[e](t,!0))return void t.cacheSet(i,t.pos);t.pos++,t.cacheSet(i,t.pos)}},It.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),o=n.length,i=t.posMax;t.pos<i;){for(r=0;r<o&&!(e=n[r](t,!1));r++);if(e){if(t.pos>=i)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},It.prototype.parse=function(t,e,r,n){var o=new E(t,this,e,r,n);this.tokenize(o)};var Ct={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},full:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}}};function Rt(t,e,r){this.src=e,this.env=r,this.options=t.options,this.tokens=[],this.inlineMode=!1,this.inline=t.inline,this.block=t.block,this.renderer=t.renderer,this.typographer=t.typographer}function Et(t,e){"string"!=typeof t&&(e=t,t="default"),e&&null!=e.linkify&&console.warn("linkify option is removed. Use linkify plugin instead:\n\nimport Remarkable from 'remarkable';\nimport linkify from 'remarkable/linkify';\nnew Remarkable().use(linkify)\n"),this.inline=new It,this.block=new ut,this.core=new Y,this.renderer=new C,this.ruler=new R,this.options={},this.configure(Ct[t]),this.set(e||{})}Et.prototype.set=function(t){g(this.options,t)},Et.prototype.configure=function(t){var e=this;if(!t)throw new Error("Wrong `remarkable` preset, check name/content");t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach((function(r){t.components[r].rules&&e[r].ruler.enable(t.components[r].rules,!0)}))},Et.prototype.use=function(t,e){return t(this,e),this},Et.prototype.parse=function(t,e){var r=new Rt(this,t,e);return this.core.process(r),r.tokens},Et.prototype.render=function(t,e){return this.renderer.render(this.parse(t,e=e||{}),this.options,e)},Et.prototype.parseInline=function(t,e){var r=new Rt(this,t,e);return r.inlineMode=!0,this.core.process(r),r.tokens},Et.prototype.renderInline=function(t,e){return this.renderer.render(this.parseInline(t,e=e||{}),this.options,e)};const Lt=class{constructor(e){t(this,e)}convertMdToHtml(){return(new Et).render(this.mdText)}render(){const t=this.convertMdToHtml();return r("div",{innerHTML:t})}};Lt.style=":host{display:block;color:var(--color-foreground-1)}:host,input,button,select,textarea{font-family:'Roboto', sans-serif}a{color:var(--color-primary-1)}";const Nt=class{constructor(r){t(this,r),this.handleClick=this.handleClick.bind(this),this.handleDblClick=this.handleDblClick.bind(this),this.clickThumbnail=e(this,"clickThumbnail",7),this.dblClickThumbnail=e(this,"dblClickThumbnail",7)}componentWillLoad(){this.subToFileProgress()}componentWillUpdate(){this.subToFileProgress()}subToFileProgress(){this.zeaSession&&this.zeaSession.sub(c.actions.FILE_WITH_PROGRESS,t=>{const e=t.file;e.id===this.zeaModelInstance.id&&(this.fileProgress=e.progress)})}handleClick(){this.clickThumbnail.emit(this.zeaModelInstance),this.isSelected=!this.isSelected}handleDblClick(){this.dblClickThumbnail.emit(this.zeaModelInstance)}render(){return r("div",{class:{ZeaThumbnail:!0,"ZeaThumbnail--selected":this.isSelected},title:this.zeaModelInstance.name,onClick:this.handleClick,onDblClick:this.handleDblClick},this.zeaModelInstance.thumbnail&&r("div",{class:"ZeaThumbnail__thumbnail",style:{backgroundImage:`url("${this.zeaModelInstance.thumbnail}")`}}),r("div",{class:"ZeaThumbnail__footer"},r("span",{class:"ZeaThumbnail__icon"},this.icon),r("span",{class:"ZeaThumbnail__name"},this.zeaModelInstance.name)),this.fileProgress&&r("div",{class:"ZeaThumbnail__progress",style:{backgroundColor:this.fileProgress.indicatorColor,width:this.fileProgress.percentageCompleted+"%"}}))}};Nt.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.ZeaThumbnail{border-radius:4px;border:1px solid #cbcbcb;width:216px}.ZeaThumbnail--selected{-webkit-box-shadow:0 0 0.5rem var(--color-foreground-1);box-shadow:0 0 0.5rem var(--color-foreground-1)}.ZeaThumbnail__icon{color:var(--color-foreground-3);font-size:24px}.ZeaThumbnail__name{color:var(--color-foreground-1);font-size:14px;margin-left:0.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ZeaThumbnail__thumbnail{border-radius:4px 4px 0 0;display:block;height:122px;background-size:cover;background-repeat:no-repeat;background-position:50%;width:100%}.ZeaThumbnail__footer{-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;height:56px;padding:0.5rem}.ZeaThumbnail__progress{height:6px;border-radius:4px}";export{f as ion_button,h as zea_breadcrumbs,p as zea_images_gallery,Lt as zea_markdown_viewer,Nt as zea_thumbnail}